(function(e){function t(t){for(var n,o,c=t[0],s=t[1],l=t[2],d=0,p=[];d<c.length;d++)o=c[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&p.push(a[o][0]),a[o]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,l||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,o=1;o<r.length;o++){var s=r[o];0!==a[s]&&(n=!1)}n&&(i.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},a={index:0},i=[];function o(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-2d21e38c":"7c91f610"}[e]+".js"}function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.e=function(e){var t=[],r=a[e];if(0!==r)if(r)t.push(r[2]);else{var n=new Promise((function(t,n){r=a[e]=[t,n]}));t.push(r[2]=n);var i,s=document.createElement("script");s.charset="utf-8",s.timeout=120,c.nc&&s.setAttribute("nonce",c.nc),s.src=o(e);var l=new Error;i=function(t){s.onerror=s.onload=null,clearTimeout(d);var r=a[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+n+": "+i+")",l.name="ChunkLoadError",l.type=n,l.request=i,r[1](l)}a[e]=void 0}};var d=setTimeout((function(){i({type:"timeout",target:s})}),12e4);s.onerror=s.onload=i,document.head.appendChild(s)}return Promise.all(t)},c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var u=l;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("8aac")},"0ca6":function(e,t,r){e.exports=r.p+"img/logo_anhc-foto-white.7ce0a0cb.svg"},"0e26":function(e,t,r){"use strict";var n=r("7a23"),a={role:"table",class:"p-datatable p-component p-datatable-sm"},i=Object(n["createVNode"])("thead",{class:"p-datatable-thead",role:"rowgroup"},[Object(n["createVNode"])("tr",{role:"row"},[Object(n["createVNode"])("th",{role:"cell"},"Rehabilitation Resource Predictor"),Object(n["createVNode"])("th",{role:"cell"},"Predicted Value")])],-1),o={class:"p-datatable-tbody",role:"rowgroup"},c={class:"",tabindex:"0",role:"row"},s=Object(n["createVNode"])("td",{role:"cell"},"Points of Physical FS Change",-1),l={role:"cell"},d={class:"",tabindex:"0",role:"row"},u=Object(n["createVNode"])("td",{role:"cell"},"Discharge FS Score",-1),p={role:"cell"},b={class:"",tabindex:"0",role:"row"},h=Object(n["createVNode"])("td",{role:"cell"},"Visits per Episode",-1),m={role:"cell"},f={class:"",tabindex:"0",role:"row"},v=Object(n["createVNode"])("td",{role:"cell"},"Duration in Days",-1),O={role:"cell"},g={class:"",tabindex:"0",role:"row"},j=Object(n["createVNode"])("td",{role:"cell"},"Average Satisfaction Score",-1),y={role:"cell"},x={role:"table",class:"m-t-2 p-datatable p-component p-datatable-sm"},S=Object(n["createVNode"])("thead",{class:"p-datatable-thead",role:"rowgroup"},[Object(n["createVNode"])("tr",{role:"row"},[Object(n["createVNode"])("th",{role:"cell",colspan:"12"},"Interpretation of Predicted Value")])],-1),w={class:"p-datatable-tbody",role:"rowgroup"},C={tabindex:"0",role:"row"},V={role:"cell",colspan:"12"};function k(e,t,r,k,N,I){return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Object(n["createVNode"])("table",a,[i,Object(n["createVNode"])("tbody",o,[Object(n["createVNode"])("tr",c,[s,Object(n["createVNode"])("td",l,Object(n["toDisplayString"])(e.getAssessmentAttribute("PredictedChange")),1)]),Object(n["createVNode"])("tr",d,[u,Object(n["createVNode"])("td",p,Object(n["toDisplayString"])(e.primaryAssessment.StagingInfo.PredictedStage.Measure),1)]),Object(n["createVNode"])("tr",b,[h,Object(n["createVNode"])("td",m,Object(n["toDisplayString"])(e.getAssessmentAttribute("Visits")),1)]),Object(n["createVNode"])("tr",f,[v,Object(n["createVNode"])("td",O,Object(n["toDisplayString"])(e.getAssessmentAttribute("Duration")),1)]),Object(n["createVNode"])("tr",g,[j,Object(n["createVNode"])("td",y,Object(n["toDisplayString"])(e.getAssessmentAttribute("Satisfaction"))+"%",1)])])]),Object(n["createVNode"])("table",x,[S,Object(n["createVNode"])("tbody",w,[Object(n["createVNode"])("tr",C,[Object(n["createVNode"])("td",V,Object(n["toDisplayString"])(e.generateInterpretation()),1)])])])],64)}r("4de4"),r("99af");var N=r("5c40"),I=Object(N["z"])({name:"AdditionalItemTable",props:{primaryAssessment:Object},methods:{getAssessmentAttribute:function(e){var t=this.primaryAssessment.AssessmentAttributes.filter((function(t){return t.Attribute.toLowerCase()==e.toLowerCase()}));return t.length>0?t[0].Value:""},generateInterpretation:function(){var e=parseInt(this.getAssessmentAttribute("PredictedChange")),t=e>0?"higher":"lower",r=this.primaryAssessment.StagingInfo.PredictedStage,n=r.Measure,a=r.Stage;return"Given this patientâ€™s risk-adjustment variables, and the actual Intake FS score, FOTO predicts this\n                patient will experience at least an ".concat("higher"===t?"increase":"decrease"," in \n                function of ").concat(e," points (to ").concat(n," or ").concat(t,"), putting them in \n                the Stage ").concat(a," level or ").concat(t," at discharge.")}}});I.render=k;t["a"]=I},"2af8":function(e,t,r){"use strict";r("c26e")},4036:function(e,t,r){"use strict";var n=r("7a23");function a(e,t,r,a,i,o){var c=Object(n["resolveComponent"])("Chart");return Object(n["openBlock"])(),Object(n["createBlock"])(c,{type:"bar",data:e.chartData,options:e.lineOptions},null,8,["data","options"])}var i=r("5c40"),o=Object(i["z"])({name:"ArtifactSummaryChart",props:{primaryAssessment:Object},data:function(){return{lineOptions:{interaction:{mode:"point"},plugins:{legend:{position:"top",fullSize:!1,labels:{boxHeight:5,boxWidth:20}}}}}},computed:{chartData:function(){for(var e=this.primaryAssessment.MCII,t=this.primaryAssessment.MDC,r=this.primaryAssessment.PredictedChangeSummary.FunctionalScoreGoal,n=this.primaryAssessment.RiskAdjustedStatisticalFOTO,a=[],i=[],o=[],c=[""],s=[null],l=[n],d=[null],u=0;u<this.primaryAssessment.FunctionalScoreSummaries.length;u++){var p=this.primaryAssessment.FunctionalScoreSummaries[u];"intake"===p.Label.toLowerCase()&&(e+=p.FunctionalScore,t+=p.FunctionalScore),a.push(null),s.push(null),i.push(e),o.push(t),c.push(p.Label),d.push(p.FunctionalScore),l.push(n),u===this.primaryAssessment.FunctionalScoreSummaries.length-1&&(a.push(p.FunctionalScore),a.push(r),s.push(r),c.push("Predicted",""),i.push(e,e,e),o.push(t,t,t),l.push(n,n))}return{labels:c,datasets:[{label:"Patient Actual",type:"line",radius:2,hoverRadius:2,data:d,fill:!1,backgroundColor:"green",borderColor:"green",pointStyle:"circle"},{label:"MCII",type:"line",data:i,fill:!1,radius:2,hoverRadius:4,borderWidth:2,borderColor:"blue",pointStyle:"line",borderDash:[5,5]},{label:"MDC",type:"line",data:o,fill:!1,radius:2,hoverRadius:4,borderWidth:2,borderColor:"purple",pointStyle:"line",borderDash:[5,5]},{label:"FOTO Predicted",type:"line",radius:9,hoverRadius:8,data:s,fill:!1,backgroundColor:"orange",borderColor:"orange",pointStyle:"star"},{label:"",type:"line",radius:0,hoverRadius:0,pointHitRadius:0,data:a,fill:!1,backgroundColor:"orange",borderColor:"orange",borderDash:[5,5]},{label:"FOTO Mean",type:"line",radius:2,hoverRadius:4,data:l,fill:!1,borderColor:"red",backgroundColor:"#fef4f7",pointStyle:"circle"}]}}}});o.render=a;t["a"]=o},"5d7b":function(e,t,r){"use strict";var n=r("7a23"),a=Object(n["createVNode"])("div",{class:"p-col-12 p-t-0"},[Object(n["createVNode"])("h3",{class:"artifact-detail-header"},"Surveys")],-1),i={class:"p-col-12 p-b-0 survey-container"},o={key:"1",class:"p-grid"},c={class:"p-col-12"},s={key:"2",class:"p-grid"},l={key:0,class:"p-col-9"},d={class:"br-spc-t"};function u(e,t,r,u,p,b){var h=Object(n["resolveComponent"])("Column"),m=Object(n["resolveComponent"])("DataTable"),f=Object(n["resolveComponent"])("Chart"),v=Object(n["resolveComponent"])("Row"),O=Object(n["resolveComponent"])("ColumnGroup"),g=Object(n["resolveComponent"])("TabPanel"),j=Object(n["resolveComponent"])("TabView");return e.surveys.length>0?(Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],{key:0},[a,Object(n["createVNode"])("div",i,[Object(n["createVNode"])(j,{scrollable:!0,activeIndex:e.activeIndex,"onUpdate:activeIndex":t[1]||(t[1]=function(t){return e.activeIndex=t})},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.surveys,(function(t,r){return Object(n["openBlock"])(),Object(n["createBlock"])(g,{key:t,header:t},{default:Object(n["withCtx"])((function(){var a;return[e.selectedSurvey?(Object(n["openBlock"])(),Object(n["createBlock"])("div",s,[Object(n["createVNode"])("div",{class:"p-col-3",id:"score-list-container-".concat(r)},[Object(n["createVNode"])(m,{class:"p-datatable-sm",autoLayout:!0,value:e.scores,responsiveLayout:"scroll"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(h,{field:"Label",header:"Patient Scores"}),Object(n["createVNode"])(h,{field:"FunctionalScore",header:""})]})),_:1},8,["value"]),(null===(a=e.scores)||void 0===a?void 0:a.length)>1?(Object(n["openBlock"])(),Object(n["createBlock"])(f,{key:0,type:"line",data:e.chartData,options:e.basicOptions},null,8,["data","options"])):Object(n["createCommentVNode"])("",!0)],8,["id"]),e.surveyValues.length>0?(Object(n["openBlock"])(),Object(n["createBlock"])("div",l,[Object(n["createVNode"])(m,{class:"p-datatable-sm",autoLayout:!0,value:e.surveyValues,header:"Responses",responsiveLayout:"scroll",paginator:!0,rows:5,filters:e.filters},{header:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(" Patient responses to "+Object(n["toDisplayString"])(e.selectedSurvey.Descriptor)+" were as follows ",1)]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(O,{type:"header"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(v,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(h,{header:"Activity (Question)",rowspan:9,sortable:!0,field:"Question"}),Object(n["createVNode"])(h,{header:"Response at",colspan:3})]})),_:1}),Object(n["createVNode"])(v,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(h,{header:"Intake"}),Object(n["createVNode"])(h,{header:"Status"}),Object(n["createVNode"])(h,{header:"Predicted"})]})),_:1})]})),_:1}),Object(n["createVNode"])(h,{field:"Question",sortable:!0},{body:Object(n["withCtx"])((function(e){return[Object(n["createVNode"])("span",d,Object(n["toDisplayString"])(e.data.Indicator)+" "+Object(n["toDisplayString"])(e.data.Question),1)]})),_:1}),Object(n["createVNode"])(h,{field:"IntakeResponse"}),Object(n["createVNode"])(h,{field:"StatusResponse"},{body:Object(n["withCtx"])((function(e){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(null===e.data.StatusResponse?"--":e.data.StatusResponse),1)]})),_:1}),Object(n["createVNode"])(h,null,{body:Object(n["withCtx"])((function(t){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.getPredictedAnswer(t.data.Question)),1)]})),_:1})]})),_:1},8,["value","filters"])])):Object(n["createCommentVNode"])("",!0)])):(Object(n["openBlock"])(),Object(n["createBlock"])("div",o,[Object(n["createVNode"])("div",c,[Object(n["createVNode"])(m,{class:"p-datatable-sm",autoLayout:!0,value:e.surveyValues,paginator:!0,rows:5,filters:e.filters},{header:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(" Patient responses to "+Object(n["toDisplayString"])(t)+" were as follows ",1)]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(h,{sortable:!0,field:"Attribute",header:"Attribute"}),Object(n["createVNode"])(h,{sortable:!0,field:"Value",header:"Answer"})]})),_:2},1032,["value","filters"])])]))]})),_:2},1032,["header"])})),128))]})),_:1},8,["activeIndex"])])],64)):Object(n["createCommentVNode"])("",!0)}var p=r("2909"),b=(r("d81d"),r("4de4"),r("d3b7"),r("6062"),r("3ca3"),r("ddb0"),r("5c40")),h=r("a1e9"),m=r("0393"),f=Object(b["z"])({name:"RiskCriteria",props:{artifact:Object},setup:function(){var e=Object(h["m"])({layout:{padding:5},elements:{point:{radius:1}},plugins:{legend:{display:!1},tooltip:{enabled:!1,padding:0}},scales:{x:{ticks:{display:!1},grid:{display:!1,borderWidth:0}},y:{ticks:{display:!1},grid:{display:!1,borderWidth:0}}}});return{basicOptions:e,store:Object(b["K"])("store")}},data:function(){return{surveys:[],activeIndex:0,filters:{global:{value:null,matchMode:m["a"].CONTAINS}}}},created:function(){var e=this.artifact.FunctionalAssessments.map((function(e){return e.Descriptor}));e.push.apply(e,Object(p["a"])(this.artifact.PatientReportedItems.filter((function(e){return"na"!==e.Survey.toLowerCase()})).map((function(e){return e.Survey})))),this.surveys=Object(p["a"])(new Set(e))},computed:{selectedSurvey:function(){var e=this;return this.store.AddLog("Viewing survey ".concat(this.surveys[this.activeIndex])),this.artifact.FunctionalAssessments.filter((function(t){return t.Descriptor.toLowerCase()===e.surveys[e.activeIndex].toLowerCase()}))[0]},surveyValues:function(){var e=this;return this.selectedSurvey?this.selectedSurvey.PatientResponses:this.artifact.PatientReportedItems.filter((function(t){return t.Survey.toLowerCase()===e.surveys[e.activeIndex].toLowerCase()}))},scores:function(){var e;return null===(e=this.selectedSurvey)||void 0===e?void 0:e.FunctionalScoreSummaries},chartData:function(){var e,t,r=null===(e=this.scores)||void 0===e?void 0:e.map((function(e){return e.FunctionalScore})),n="",a="";return r.length>0&&r[0]>r[r.length-1]?(n="#e91e63",a="#fef4f7"):(n="#689f38",a="#f7faf5"),{labels:null===(t=this.scores)||void 0===t?void 0:t.map((function(){return""})),datasets:[{label:"",type:"shadowLine",data:r,fill:!1,borderWidth:4,borderColor:n,backgroundColor:a}]}}},methods:{getPredictedAnswer:function(e){var t,r=null===(t=this.selectedSurvey.StagingInfo)||void 0===t?void 0:t.FunctionalityPredictions.filter((function(t){return t.Question.toLowerCase()===e.toLowerCase()}));return r&&r.length>0?r[0].Answer:"--"}}});f.render=u;t["a"]=f},"7e4e":function(e,t,r){e.exports=r.p+"img/nh_brand_symbol.fbc7a76a.png"},"8aac":function(e,t,r){"use strict";r.r(t);var n=r("1da1"),a=(r("e260"),r("e6cf"),r("cca6"),r("a79d"),r("96cf"),r("d3b7"),r("7a23")),i=r("a9dc"),o=r.n(i),c=r("7e4e"),s=r.n(c),l={key:"1",class:"loader"},d=Object(a["createVNode"])("h3",null,"Right Sidebar",-1),u={class:"layout-main"},p={key:"1a"},b={key:"1b",class:"p-col-12 flex ta-c align-items-center justify-content-center flex-d-c noEpisodesContainer"},h={class:"p-col-12"},m={class:"bolder ta-c"},f={class:"p-col-12"},v=Object(a["createVNode"])("br",null,null,-1),O={key:"1c",class:"p-col-12 flex ta-c align-items-center justify-content-center flex-d-c noEpisodesContainer"},g=Object(a["createVNode"])("div",{class:"p-col-12"},[Object(a["createVNode"])("h1",{class:"bolder ta-c"},"No episodes were found.")],-1),j=Object(a["createVNode"])("div",{class:"layout-footer wrap"},[Object(a["createVNode"])("img",{alt:"Logo",src:s.a,height:"30",class:"m-r-_5-r"}),Object(a["createVNode"])("span",{class:"ls-_5"},[Object(a["createVNode"])("span",{class:"fs-n ls-n bolder color-primary"},"Net Health"),Object(a["createTextVNode"])(" - Reuniting caregivers with their calling.")])],-1);function y(e,t,r,n,i,o){var c=Object(a["resolveComponent"])("vue-progress-bar"),s=Object(a["resolveComponent"])("Toast"),y=Object(a["resolveComponent"])("AppSplash"),x=Object(a["resolveComponent"])("AppTopBar"),S=Object(a["resolveComponent"])("Sidebar"),w=Object(a["resolveComponent"])("AppSidebar"),C=Object(a["resolveComponent"])("SurveyLaunch"),V=Object(a["resolveComponent"])("Dialog"),k=Object(a["resolveComponent"])("EpisodeCreationForm"),N=Object(a["resolveComponent"])("ArtifactVisitCreationForm"),I=Object(a["resolveComponent"])("EpisodeDischargeForm"),E=Object(a["resolveComponent"])("ClaimEpisodeForm"),D=Object(a["resolveComponent"])("AppDash"),R=Object(a["resolveComponent"])("Button"),T=Object(a["resolveComponent"])("SpeedDial");return Object(a["openBlock"])(),Object(a["createBlock"])("div",null,[Object(a["createVNode"])(c),Object(a["createVNode"])(s),Object(a["createVNode"])(a["Transition"],{name:"fade",mode:"out-in"},{default:Object(a["withCtx"])((function(){return[e.layout.loading?(Object(a["openBlock"])(),Object(a["createBlock"])("div",l,[Object(a["createVNode"])(y,{size:150})])):(Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:"2",class:e.containerClass(),onClick:t[14]||(t[14]=function(){return e.onWrapperClick&&e.onWrapperClick.apply(e,arguments)})},[Object(a["createVNode"])(x),Object(a["createVNode"])(S,{visible:e.visibleRight,"onUpdate:visible":t[1]||(t[1]=function(t){return e.visibleRight=t}),baseZIndex:1e3,position:"right"},{default:Object(a["withCtx"])((function(){return[d]})),_:1},8,["visible"]),Object(a["createVNode"])(a["Transition"],{name:"layout-sidebar"},{default:Object(a["withCtx"])((function(){return[Object(a["withDirectives"])(Object(a["createVNode"])(w,null,null,512),[[a["vShow"],e.isSidebarVisible()]])]})),_:1}),Object(a["createVNode"])("div",u,[Object(a["createVNode"])(a["Transition"],{name:"fade",mode:"out-in"},{default:Object(a["withCtx"])((function(){var r;return[0!==(null===(r=e.store.Episode.State.Episodes)||void 0===r?void 0:r.length)?(Object(a["openBlock"])(),Object(a["createBlock"])("div",p,[Object(a["createVNode"])(V,{header:"Launch Survey",dismissableMask:!0,visible:e.showSurvey,"onUpdate:visible":t[2]||(t[2]=function(t){return e.showSurvey=t}),style:{width:"300px"},modal:!0,class:"p-fluid dialog-head-p-b-small"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(C,{episodeId:e.selectedId},null,8,["episodeId"])]})),_:1},8,["visible"]),Object(a["createVNode"])(V,{visible:e.showEpisodeForm,"onUpdate:visible":t[4]||(t[4]=function(t){return e.showEpisodeForm=t}),dismissableMask:!0,style:{width:"50rem"},header:"Episode Details",modal:!0,class:"p-fluid"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(k,{onClose:t[3]||(t[3]=function(t){e.showEpisodeForm=!1})})]})),_:1},8,["visible"]),Object(a["createVNode"])(V,{visible:e.showVisitForm,"onUpdate:visible":t[6]||(t[6]=function(t){return e.showVisitForm=t}),dismissableMask:!0,style:{width:"25rem"},header:"Visit Details",modal:!0,class:"p-fluid"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(N,{onClose:t[5]||(t[5]=function(t){e.showVisitForm=!1}),externalEpisodeId:e.selectedId},null,8,["externalEpisodeId"])]})),_:1},8,["visible"]),Object(a["createVNode"])(V,{visible:e.showDischargeForm,"onUpdate:visible":t[8]||(t[8]=function(t){return e.showDischargeForm=t}),dismissableMask:!0,style:{width:"25rem"},header:"Discharge Episode",modal:!0,class:"p-fluid"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(I,{onClose:t[7]||(t[7]=function(t){e.showDischargeForm=!1}),externalEpisodeId:e.selectedId},null,8,["externalEpisodeId"])]})),_:1},8,["visible"]),Object(a["createVNode"])(V,{visible:e.showClaimEpisodeForm,"onUpdate:visible":t[10]||(t[10]=function(t){return e.showClaimEpisodeForm=t}),dismissableMask:!0,style:{width:"75rem"},header:"Claim Episode",modal:!0,class:"p-fluid"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(E,{episodeId:e.selectedId,onClose:t[9]||(t[9]=function(t){e.showClaimEpisodeForm=!1})},null,8,["episodeId"])]})),_:1},8,["visible"]),Object(a["createVNode"])(D,{activeEpisodeFilters:e.layout.activeEpisodeFilters,showDischarged:e.layout.showDischargedEpisodes,onCardToggle:e.toggleCardEpisodeDisplay,onToggleDischargedEpisodes:e.toggleDischargeView,onDisplaySurvey:e.displaySurveyModal,onDisplayDischarge:e.displayDischargeModal,onDisplayVisit:e.displayVisitModal,onDisplayEpisodeClaim:e.displayEpisodeClaimModal},null,8,["activeEpisodeFilters","showDischarged","onCardToggle","onToggleDischargedEpisodes","onDisplaySurvey","onDisplayDischarge","onDisplayVisit","onDisplayEpisodeClaim"])])):"Practitioner"===e.store.Fhir.State.Context.LaunchedByResource?(Object(a["openBlock"])(),Object(a["createBlock"])("div",b,[Object(a["createVNode"])("div",h,[Object(a["createVNode"])("h1",m,"No FOTO episodes were found for patient, "+Object(a["toDisplayString"])(e.outboundPatient.Name)+". Would you like to create one?",1)]),Object(a["createVNode"])("div",f,[v,Object(a["createVNode"])(R,{class:"important-button p-shadow-24",type:"button",label:"Create an Episode",onClick:t[11]||(t[11]=function(t){return e.showEpisodeForm=!0})})]),Object(a["createVNode"])(V,{visible:e.showEpisodeForm,"onUpdate:visible":t[13]||(t[13]=function(t){return e.showEpisodeForm=t}),dismissableMask:!0,style:{width:"50rem"},header:"Episode Details",modal:!0,class:"p-fluid"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(k,{onClose:t[12]||(t[12]=function(t){e.showEpisodeForm=!1})})]})),_:1},8,["visible"])])):(Object(a["openBlock"])(),Object(a["createBlock"])("div",O,[g]))]})),_:1}),j]),Object(a["createVNode"])(T,{tooltipOptions:{position:"left"},model:e.speedDialItems,style:{position:"fixed",bottom:"3rem",right:"3rem","z-index":"1000"},direction:"up-left",transitionDelay:80,type:"quarter-circle",buttonClass:"p-shadow-24 main-speeddial"},null,8,["model"])],2))]})),_:1})])}var x=r("5c40"),S=r("a1e9"),w={class:"vue-splash__anim"};function C(e,t,r,n,i,o){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{class:["vue-splash",{"vue-splash--fixed":!0}],style:e.vueSplashStyle},[Object(a["createVNode"])("div",null,[Object(a["createVNode"])("div",w,[Object(a["createVNode"])("img",{src:e.logo,style:e.imageStyle},null,12,["src"])])])],4)}r("a9e3");var V=Object(a["defineComponent"])({name:"AppSplash",props:{size:{type:[Number,String],default:180}},created:function(){document.documentElement.style.setProperty("--splash-color","#F9423A")},computed:{logo:function(){return r("7e4e")},imageStyle:function(){var e=this.size+"px";return{width:e}},vueSplashStyle:function(){return{backgroundColor:"transparent"}}}});V.render=C;var k=V,N=(r("caad"),r("2532"),{class:"p-grid p-fluid dashboard"}),I={class:"flex p-jc-between m-b-1-r"},E=Object(a["createVNode"])("div",null,[Object(a["createVNode"])("div",{class:"fw-600 text-xl"},"In Progress")],-1),D={class:"flex align-items-center p-jc-center bg-green-100 border-round",style:{width:"2.5rem",height:"2.5rem"}},R={class:"bolder text-green-500 text-xl"},T=Object(a["createVNode"])("span",{class:"block text-500 font-medium"},"Open Episodes",-1),P={class:"flex p-jc-between m-b-1-r"},A=Object(a["createVNode"])("div",null,[Object(a["createVNode"])("div",{class:"fw-600 text-xl"},"Intake Overdue")],-1),B={class:"flex align-items-center p-jc-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"}},F={class:"bolder text-blue-500 text-xl"},L=Object(a["createVNode"])("span",{class:"block text-500 font-medium"},"7 to 14 days of inactivity",-1),_={class:"flex p-jc-between m-b-1-r"},M=Object(a["createVNode"])("div",null,[Object(a["createVNode"])("div",{class:"fw-600 text-xl"},"Status Overdue")],-1),$={class:"flex align-items-center p-jc-center bg-purple-100 border-round",style:{width:"2.5rem",height:"2.5rem"}},G={class:"bolder text-purple-500 text-xl"},U=Object(a["createVNode"])("span",{class:"block text-500 font-medium"},"14 to 30 days of inactivity",-1),q={class:"flex p-jc-between m-b-1-r"},z=Object(a["createVNode"])("div",null,[Object(a["createVNode"])("div",{class:"fw-600 text-xl"},"Close")],-1),H={class:"flex align-items-center p-jc-center bg-orange-100 border-round",style:{width:"2.5rem",height:"2.5rem"}},W={class:"bolder text-orange-500 text-xl"},J=Object(a["createVNode"])("span",{class:"block text-500 font-medium"},"30 to 44 days of inactivity",-1),K={class:"flex p-jc-between m-b-1-r"},X=Object(a["createVNode"])("div",null,[Object(a["createVNode"])("div",{class:"fw-600 text-xl"},"Inactive")],-1),Q={class:"flex align-items-center p-jc-center bg-pink-100 border-round",style:{width:"2.5rem",height:"2.5rem"}},Y={class:"bolder text-pink-600 text-xl"},Z=Object(a["createVNode"])("span",{class:"block text-500 font-medium"},"45+ days of inactivity",-1),ee={class:"p-col-12 p-lg-12 dashboard-main"},te={class:"table-header p-d-flex p-flex-column p-flex-md-row p-jc-md-between"},re=Object(a["createVNode"])("h5",{class:"p-mb-2 p-m-md-0 p-as-md-center"},"Patient Episodes",-1),ne=Object(a["createTextVNode"])("No episodes found"),ae={class:"p-grid m-t-_5-r"},ie={class:"p-lg-10"},oe={class:"m-b-_5-r m-t-0"},ce={key:0,class:"p-lg-2"},se={class:"p-col-12"},le=Object(a["createVNode"])("h3",{class:"m-t-0"},"Update External Episode ID",-1),de=Object(a["createVNode"])("span",{class:"importantMessage p-confirm-popup-message"},"Editing or removing this ID may cause issues with your EMR integration. Clear the ID field to release the episode from FOTO.",-1),ue={class:"p-col-12"},pe={class:"p-field p-col-12 p-md-12"},be={class:"p-float-label"},he={key:0},me={key:1},fe=Object(a["createVNode"])("label",{for:"externalEpisodeId-select-op"},"Episode",-1),ve=Object(a["createVNode"])("div",{class:"p-col-6 p-md-6"},null,-1),Oe={class:"p-col-6 p-md-6"},ge={class:"p-col-12"},je=Object(a["createVNode"])("div",{class:"p-col-12"},[Object(a["createVNode"])("h2",{class:"ta-c bolder"},"This episode has not been claimed in FOTO. Would you like to claim it?")],-1),ye={class:"p-col-12"},xe=Object(a["createVNode"])("br",null,null,-1),Se=Object(a["createVNode"])("br",null,null,-1),we={key:2,class:"p-col-12"},Ce=Object(a["createVNode"])("h2",{class:"ta-c bolder"},"No data for this episode was found.",-1);function Ve(e,t,r,n,i,o){var c=Object(a["resolveComponent"])("Card"),s=Object(a["resolveComponent"])("InputSwitch"),l=Object(a["resolveComponent"])("Column"),d=Object(a["resolveComponent"])("Tag"),u=Object(a["resolveComponent"])("Button"),p=Object(a["resolveComponent"])("Menu"),b=Object(a["resolveComponent"])("Divider"),h=Object(a["resolveComponent"])("Dropdown"),m=Object(a["resolveComponent"])("OverlayPanel"),f=Object(a["resolveComponent"])("ArtifactDetail"),v=Object(a["resolveComponent"])("DataTable"),O=Object(a["resolveDirective"])("tooltip");return Object(a["openBlock"])(),Object(a["createBlock"])("div",N,[Object(a["createVNode"])("div",{class:"p-col-12 statusCard inProgress ".concat(e.d_activeEpisodeFilters.includes(0)?"active":""),onClick:t[1]||(t[1]=function(t){return e.toggleCard(0)})},[Object(a["createVNode"])(c,null,{content:Object(a["withCtx"])((function(){return[Object(a["createVNode"])("div",I,[E,Object(a["createVNode"])("div",D,[Object(a["createVNode"])("span",R,Object(a["toDisplayString"])(e.episodesWithStatusCount(0)),1)])]),T]})),_:1})],2),Object(a["createVNode"])("div",{class:"p-col-12 statusCard intakeOverdue ".concat(e.d_activeEpisodeFilters.includes(1)?"active":""),onClick:t[2]||(t[2]=function(t){return e.toggleCard(1)})},[Object(a["createVNode"])(c,null,{content:Object(a["withCtx"])((function(){return[Object(a["createVNode"])("div",P,[A,Object(a["createVNode"])("div",B,[Object(a["createVNode"])("span",F,Object(a["toDisplayString"])(e.episodesWithStatusCount(1)),1)])]),L]})),_:1})],2),Object(a["createVNode"])("div",{class:"p-col-12 statusCard statusOverdue ".concat(e.d_activeEpisodeFilters.includes(2)?"active":""),onClick:t[3]||(t[3]=function(t){return e.toggleCard(2)})},[Object(a["createVNode"])(c,null,{content:Object(a["withCtx"])((function(){return[Object(a["createVNode"])("div",_,[M,Object(a["createVNode"])("div",$,[Object(a["createVNode"])("span",G,Object(a["toDisplayString"])(e.episodesWithStatusCount(2)),1)])]),U]})),_:1})],2),Object(a["createVNode"])("div",{class:"p-col-12 statusCard close ".concat(e.d_activeEpisodeFilters.includes(3)?"active":""),onClick:t[4]||(t[4]=function(t){return e.toggleCard(3)})},[Object(a["createVNode"])(c,null,{content:Object(a["withCtx"])((function(){return[Object(a["createVNode"])("div",q,[z,Object(a["createVNode"])("div",H,[Object(a["createVNode"])("span",W,Object(a["toDisplayString"])(e.episodesWithStatusCount(3)),1)])]),J]})),_:1})],2),Object(a["createVNode"])("div",{class:"p-col-12 statusCard inactive ".concat(e.d_activeEpisodeFilters.includes(4)?"active":""),onClick:t[5]||(t[5]=function(t){return e.toggleCard(4)})},[Object(a["createVNode"])(c,null,{content:Object(a["withCtx"])((function(){return[Object(a["createVNode"])("div",K,[X,Object(a["createVNode"])("div",Q,[Object(a["createVNode"])("span",Y,Object(a["toDisplayString"])(e.episodesWithStatusCount(4)),1)])]),Z]})),_:1})],2),Object(a["createVNode"])("div",ee,[Object(a["createVNode"])(c,null,{title:Object(a["withCtx"])((function(){return[Object(a["createVNode"])("div",te,[re,Object(a["withDirectives"])(Object(a["createVNode"])(s,{onChange:t[6]||(t[6]=function(t){return e.$emit("ToggleDischargedEpisodes")}),modelValue:e.d_showDischarged,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.d_showDischarged=t}),id:"showDischarged"},null,8,["modelValue"]),[[O,"Show Discharged",void 0,{top:!0}]])])]})),content:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(v,{ref:"dt",autoLayout:!0,scrollHeight:"flex",paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",rowsPerPageOptions:[5,10,15],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}",value:e.episodes,onRowExpand:e.onRowExpand,expandedRows:e.expandedRows,"onUpdate:expandedRows":t[12]||(t[12]=function(t){return e.expandedRows=t}),dataKey:"EpisodeId",class:"episode-list-dt",responsiveLayout:"stack",paginator:!0,rows:5,filters:e.filters},{empty:Object(a["withCtx"])((function(){return[ne]})),expansion:Object(a["withCtx"])((function(r){return[r.data.ExternalEpisodeId?(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:0},[e.error?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:0},[Object(a["createVNode"])("div",ae,[Object(a["createVNode"])("div",ie,[Object(a["createVNode"])("h3",oe,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.generateEpisodeDetailHeader(r.data))+" ",1),"Practitioner"===e.store.Fhir.State.Context.LaunchedByResource?Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createBlock"])("span",{key:0,onClick:t[8]||(t[8]=function(){return e.toggleExtEpisodeIdOp&&e.toggleExtEpisodeIdOp.apply(e,arguments)}),class:"toggleOp color-primary bolder"},[Object(a["createTextVNode"])(" - "+Object(a["toDisplayString"])(r.data.ExternalEpisodeId),1)],512)),[[O,"External ID (Click to edit)",void 0,{top:!0}]]):Object(a["createCommentVNode"])("",!0)])]),5!==r.data.Info?(Object(a["openBlock"])(),Object(a["createBlock"])("div",ce,[Object(a["createVNode"])(u,{icon:"pi pi-cog",class:"w-auto float-r p-text-bold p-button-sm",onClick:e.toggle,type:"button",label:"Episode Options","aria-haspopup":"true","aria-controls":"episode_option_menu_"+r.data.EpisodeId},null,8,["onClick","aria-controls"]),Object(a["createVNode"])(p,{class:"w-auto",id:"episode_option_menu_"+r.data.EpisodeId,ref:"episode_option_menu_"+r.data.EpisodeId,model:e.menuItems,popup:!0},null,8,["id","model"])])):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])(m,{showCloseIcon:!0,dismissable:!0,class:"artifact-detail-op-md",ref:"extEpisodeIdOp"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])("div",se,[le,de,Object(a["createVNode"])(b,{type:"dashed"})]),Object(a["createVNode"])("div",ue,[Object(a["createVNode"])("form",{autocomplete:"off",onSubmit:t[10]||(t[10]=Object(a["withModifiers"])((function(){return e.submitExternalEpisodeIdEdit&&e.submitExternalEpisodeIdEdit.apply(e,arguments)}),["prevent"])),class:"p-fluid p-grid"},[Object(a["createVNode"])("div",pe,[Object(a["createVNode"])("span",be,[Object(a["createVNode"])(h,{id:"externalEpisodeId-select-op",modelValue:e.inContextExternalIdOption,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.inContextExternalIdOption=t}),options:e.episodesOfCare,optionLabel:"active"},{value:Object(a["withCtx"])((function(e){var t;return[e.value?(Object(a["openBlock"])(),Object(a["createBlock"])("div",he,Object(a["toDisplayString"])(e.value.period.start)+" "+Object(a["toDisplayString"])(e.value.period.end?" - "+e.value.period.end:"")+" "+Object(a["toDisplayString"])(null===(t=e.value.type[0])||void 0===t?void 0:t.text),1)):(Object(a["openBlock"])(),Object(a["createBlock"])("div",me,"Â "))]})),option:Object(a["withCtx"])((function(e){var t;return[Object(a["createVNode"])("div",null,Object(a["toDisplayString"])(e.option.period.start)+" "+Object(a["toDisplayString"])(e.option.period.end?" - "+e.option.period.end:"")+" "+Object(a["toDisplayString"])(null===(t=e.option.type[0])||void 0===t?void 0:t.text),1)]})),_:1},8,["modelValue","options"]),fe])]),ve,Object(a["createVNode"])("div",Oe,[Object(a["createVNode"])(u,{type:"submit",label:"Submit",loading:e.updatingExternalId,icon:"pi pi-check",class:""},null,8,["loading"])])],32)])]})),_:1},512)],64)),Object(a["createVNode"])("div",ge,[Object(a["createVNode"])(f,{episode:r.data,onError:e.errorEvent},null,8,["episode","onError"])])],64)):"Practitioner"===e.store.Fhir.State.Context.LaunchedByResource?(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:1},[je,Object(a["createVNode"])("div",ye,[xe,Object(a["createVNode"])(u,{class:"important-button p-shadow-24",type:"button",label:"Claim Episode",onClick:t[11]||(t[11]=function(t){return e.$emit("DisplayEpisodeClaim",e.selectedEpisode.EpisodeId)})}),Se])],64)):(Object(a["openBlock"])(),Object(a["createBlock"])("div",we,[Ce]))]})),default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{expander:!0}),Object(a["createVNode"])(l,{field:"TherapistName",header:"Therapist",sortable:!0}),Object(a["createVNode"])(l,{field:"BodyPartText",header:"Condition",sortable:!0}),Object(a["createVNode"])(l,{field:"ImpairmentText",header:"Impairment",sortable:!0}),Object(a["createVNode"])(l,{field:"CreateDate",header:"Setup",sortable:!0},{body:Object(a["withCtx"])((function(t){return[Object(a["createVNode"])("span",null,Object(a["toDisplayString"])(e.formatDateTime(t.data.CreateDate)),1)]})),_:1}),Object(a["createVNode"])(l,{field:"LatestIntakeTime",header:"Intake",sortable:!0},{body:Object(a["withCtx"])((function(t){return[Object(a["createVNode"])("span",null,Object(a["toDisplayString"])(e.formatDateTime(t.data.LatestIntakeTime)),1)]})),_:1}),Object(a["createVNode"])(l,{field:"LatestStatusTime",header:"Status",sortable:!0},{body:Object(a["withCtx"])((function(t){return[Object(a["createVNode"])("span",null,Object(a["toDisplayString"])(e.formatDateTime(t.data.LatestStatusTime)),1)]})),_:1}),Object(a["createVNode"])(l,{field:"DischargeTime",header:"Discharge",sortable:!0},{body:Object(a["withCtx"])((function(t){return[Object(a["createVNode"])("span",null,Object(a["toDisplayString"])(e.formatDateTime(t.data.DischargeTime)),1)]})),_:1}),Object(a["createVNode"])(l,{field:"Info",header:"Info",class:"info-column",sortable:!0},{body:Object(a["withCtx"])((function(e){return[0===e.data.Info?(Object(a["openBlock"])(),Object(a["createBlock"])(d,{key:0,class:"bg-green-100 text-green-500",severity:"success",value:"In Progress"})):1===e.data.Info?(Object(a["openBlock"])(),Object(a["createBlock"])(d,{key:1,class:"bg-blue-100 text-blue-500",severity:"danger",value:"Intake Overdue"})):2===e.data.Info?(Object(a["openBlock"])(),Object(a["createBlock"])(d,{key:2,class:"bg-purple-100 text-purple-500",severity:"warning",value:"Status Overdue"})):3===e.data.Info?(Object(a["openBlock"])(),Object(a["createBlock"])(d,{key:3,class:"bg-orange-100 text-orange-500",severity:"danger",value:"Close"})):4===e.data.Info?(Object(a["openBlock"])(),Object(a["createBlock"])(d,{key:4,class:"bg-pink-100 text-pink-600",severity:"danger",value:"Inactive"})):5===e.data.Info?(Object(a["openBlock"])(),Object(a["createBlock"])(d,{key:5,class:"bg-bluegray-100 text-bluegray-500",severity:"danger",value:"Discharged".concat(e.data.NPId&&e.data.NPId>0?" - NP":"")},null,8,["value"])):Object(a["createCommentVNode"])("",!0)]})),_:1})]})),_:1},8,["value","onRowExpand","expandedRows","filters"])]})),_:1})])])}r("99af"),r("4de4"),r("a434"),r("2ca0");var ke=r("0393"),Ne={class:"p-grid p-fluid"},Ie={key:"1",class:"p-lg-12"},Ee={class:"card p-1_5"},De={key:"2",class:"p-lg-12"},Re={class:"p-grid p-lg-12"},Te={class:"p-lg-8"},Pe={class:"m-t-_5-r"},Ae={key:0},Be=Object(a["createVNode"])("span",null," - ",-1),Fe={key:1,class:"color-primary bolder"},Le=Object(a["createVNode"])("h4",{class:"m-t-0"},"Update Visit Number",-1),_e={class:"p-field p-col-12 p-md-12"},Me={class:"p-float-label"},$e=Object(a["createVNode"])("label",{for:"visit-num-overlay-input"},"Visit Number",-1),Ge={key:0,class:"p-lg-4"},Ue={class:"p-grid p-l-1-r p-r-1-r"},qe={class:"p-lg-12"},ze={class:"p-lg-12"},He={class:"p-lg-7"},We={class:"p-lg-5"},Je={key:1},Ke={key:0},Xe=Object(a["createVNode"])("h2",{class:"ta-c bolder m-b-_5-r"},"An error has occured",-1),Qe={class:"ta-c error-icon"},Ye={class:"ta-c m-t-_5-r"},Ze=Object(a["createVNode"])("h4",{class:"ta-c m-t-_5-r"},"Please try again. If this error continues, please contact support.",-1),et={key:1},tt=Object(a["createVNode"])("h2",{class:"ta-c bolder"},"No episode artifacts were found. Would you like to begin a survey?",-1),rt=Object(a["createVNode"])("br",null,null,-1),nt=Object(a["createVNode"])("br",null,null,-1);function at(e,t,r,n,i,o){var c=this,s=Object(a["resolveComponent"])("Skeleton"),l=Object(a["resolveComponent"])("InputNumber"),d=Object(a["resolveComponent"])("Divider"),u=Object(a["resolveComponent"])("Button"),p=Object(a["resolveComponent"])("OverlayPanel"),b=Object(a["resolveComponent"])("Menu"),h=Object(a["resolveComponent"])("RiskAdjustmentCriteria"),m=Object(a["resolveComponent"])("FunctionalStatusMeasureTable"),f=Object(a["resolveComponent"])("AdditionalItemTable"),v=Object(a["resolveComponent"])("ArtifactSummaryChart"),O=Object(a["resolveComponent"])("ArtifactSurveys"),g=Object(a["resolveComponent"])("TabPanel"),j=Object(a["resolveComponent"])("TabView"),y=Object(a["resolveComponent"])("font-awesome-icon"),x=Object(a["resolveDirective"])("tooltip");return Object(a["openBlock"])(),Object(a["createBlock"])("div",Ne,[Object(a["createVNode"])(a["Transition"],{name:"fade",mode:"out-in"},{default:Object(a["withCtx"])((function(){return[e.loadingDetails?(Object(a["openBlock"])(),Object(a["createBlock"])("div",Ie,[Object(a["createVNode"])("div",Ee,[Object(a["createVNode"])(s,{class:"p-mb-4",width:"90%"}),Object(a["createVNode"])(s,{class:"p-mb-4",width:"55%"}),Object(a["createVNode"])(s,{class:"p-mb-4",width:"75%"}),Object(a["createVNode"])(s,{class:"p-mb-4",width:"65%"}),Object(a["createVNode"])(s,{class:"p-mb-4",width:"45%"}),Object(a["createVNode"])(s,{class:"p-mb-4",width:"85%"}),Object(a["createVNode"])(s,{class:"p-mb-4",width:"100%"}),Object(a["createVNode"])(s,{class:"p-mb-4",width:"60%"}),Object(a["createVNode"])(s,{width:"75%"})])])):(Object(a["openBlock"])(),Object(a["createBlock"])("div",De,[e.artifacts.length>0?(Object(a["openBlock"])(),Object(a["createBlock"])(j,{key:0,onTabChange:e.artifactSelected,scrollable:!0},{default:Object(a["withCtx"])((function(){return[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.artifacts,(function(r){return Object(a["openBlock"])(),Object(a["createBlock"])(g,{header:e.createPanelHeader(r),key:r.ReportId},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])("div",Re,[Object(a["createVNode"])("div",Te,[Object(a["createVNode"])("h3",Pe,[Object(a["createVNode"])("span",{innerHTML:e.panelBodyHeader},null,8,["innerHTML"]),[0,1].includes(r.ReportType)?(Object(a["openBlock"])(),Object(a["createBlock"])("span",Ae,[Be,"Practitioner"===e.store.Fhir.State.Context.LaunchedByResource?Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createBlock"])("span",{key:0,class:"toggleOp color-primary bolder",onClick:t[1]||(t[1]=function(){return e.toggleArtifactVisitNumOp&&e.toggleArtifactVisitNumOp.apply(e,arguments)})},[Object(a["createTextVNode"])(Object(a["toDisplayString"])(c.inContextArtifact.Visit&&0!==c.inContextArtifact.Visit?"Visit #"+c.inContextArtifact.Visit:"Click to set visit number"),1)],512)),[[x,"Visit Number (Click to edit)",void 0,{top:!0}]]):(Object(a["openBlock"])(),Object(a["createBlock"])("span",Fe,Object(a["toDisplayString"])(c.inContextArtifact.Visit&&0!==c.inContextArtifact.Visit?"Visit #"+c.inContextArtifact.Visit:""),1))])):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])(p,{onShow:function(t){return e.artifactVisitValue=r.Visit},showCloseIcon:!0,dismissable:!0,class:"artifact-detail-op-sm",ref:"artifactVisitNumOp-".concat(r.ReportId)},{default:Object(a["withCtx"])((function(){return[Le,Object(a["createVNode"])("form",{autocomplete:"off",onSubmit:t[3]||(t[3]=Object(a["withModifiers"])((function(){return e.updateVisitNumber&&e.updateVisitNumber.apply(e,arguments)}),["prevent"])),class:"p-fluid p-grid"},[Object(a["createVNode"])("div",_e,[Object(a["createVNode"])("span",Me,[Object(a["createVNode"])(l,{showButtons:"",id:"vist-num-overlay-input",modelValue:e.artifactVisitValue,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.artifactVisitValue=t}),min:0},null,8,["modelValue"]),$e])]),Object(a["createVNode"])(d,{type:"dashed"}),Object(a["createVNode"])(u,{type:"submit",label:"Submit",loading:e.updatingVisitNumber,icon:"pi pi-check",class:""},null,8,["loading"])],32)]})),_:2},1032,["onShow"])]),[0,1,2].includes(r.ReportType)?(Object(a["openBlock"])(),Object(a["createBlock"])("div",Ge,[Object(a["createVNode"])(u,{icon:"pi pi-cog",class:"w-auto float-r p-text-bold p-button-sm",type:"button",label:"Report Options",onClick:e.toggle,"aria-haspopup":"true","aria-controls":"artifact-overlay-menu"},null,8,["onClick"]),Object(a["createVNode"])(b,{class:"w-auto",id:"artifact-overlay-menu",ref:"artifact_report_menu_"+r.ReportId,model:e.menuItems,popup:!0},null,8,["model"])])):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("div",Ue,[e.primaryAssessment?(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:0},[Object(a["createVNode"])("div",qe,[Object(a["createVNode"])(h,{artifact:r},null,8,["artifact"])]),Object(a["createVNode"])("div",ze,[Object(a["createVNode"])(m,{primaryAssessment:e.primaryAssessment},null,8,["primaryAssessment"])]),Object(a["createVNode"])("div",He,[Object(a["createVNode"])(f,{primaryAssessment:e.primaryAssessment},null,8,["primaryAssessment"])]),Object(a["createVNode"])("div",We,[Object(a["createVNode"])(v,{primaryAssessment:e.primaryAssessment},null,8,["primaryAssessment"])])],64)):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])(O,{artifact:r},null,8,["artifact"])])]})),_:2},1032,["header"])})),128))]})),_:1},8,["onTabChange"])):(Object(a["openBlock"])(),Object(a["createBlock"])("div",Je,[e.error?(Object(a["openBlock"])(),Object(a["createBlock"])("div",Ke,[Xe,Object(a["createVNode"])("p",Qe,[Object(a["createVNode"])(y,{icon:"frown"})]),Object(a["createVNode"])("h3",Ye,Object(a["toDisplayString"])(e.error),1),Ze])):(Object(a["openBlock"])(),Object(a["createBlock"])("div",et,[tt,rt,Object(a["createVNode"])(u,{class:"important-button p-shadow-24",type:"button",label:"Launch Survey",onClick:e.launchSurvey},null,8,["onClick"]),nt]))]))]))]})),_:1})])}var it=r("c4e3");it["a"].render=at;var ot=it["a"],ct=r("e488"),st=Object(x["z"])({name:"AppDash",components:{ArtifactDetail:ot},setup:function(){var e=Object(a["inject"])("store"),t=e.GetContextValue("FotoPatient"),r=e.Fhir.State.Context.EpisodeOfCare;return{store:e,patient:t,episodesOfCare:r}},props:{showDischarged:Boolean,activeEpisodeFilters:Array},data:function(){return{error:null,d_showDischarged:this.showDischarged,updatingExternalId:!1,inContextExternalIdOption:null,selectedEpisode:null,expandedRows:[],d_activeEpisodeFilters:this.activeEpisodeFilters,filters:{global:{value:null,matchMode:ke["a"].CONTAINS}}}},computed:{episodes:function(){var e=this;return this.store.Episode.FilterLocal((function(t){return e.d_activeEpisodeFilters.includes(t.Info)||e.d_showDischarged&&t.Info===ct["a"].Discharged}))},menuItems:function(){var e=[{label:"View Survey",icon:"pi pi-file",command:this.displaySurvey}];return"Practitioner"===this.store.Fhir.State.Context.LaunchedByResource&&e.unshift({label:"Add Visit",icon:"pi pi-plus",command:this.displayVisitForm},{label:"Discharge",icon:"pi pi-times",command:this.displayDischargeForm}),e}},methods:{toggle:function(e){this.$refs["episode_option_menu_".concat(this.selectedEpisode.EpisodeId)].toggle(e),e.stopPropagation()},errorEvent:function(e){this.error=e},submitExternalEpisodeIdEdit:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var n,a,i,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,t.selectedEpisode.ExternalEpisodeId===(null===(n=t.inContextExternalIdOption)||void 0===n?void 0:n.id)||!t.inContextExternalIdOption){r.next=14;break}return t.store.AddLog("Updating external id for episode ".concat(t.selectedEpisode.EpisodeId," with the new value of ").concat(null===(a=t.inContextExternalIdOption)||void 0===a?void 0:a.id)),t.$Progress.start(),t.updatingExternalId=!0,r.next=7,t.store.Episode.DeleteClaim(t.selectedEpisode.EpisodeId,t.selectedEpisode.ExternalEpisodeId);case 7:if(o=r.sent,!o){r.next=11;break}return r.next=11,t.store.Episode.Claim(t.selectedEpisode.EpisodeId,null===(i=t.inContextExternalIdOption)||void 0===i?void 0:i.id);case 11:t.$refs.extEpisodeIdOp.toggle(e),t.updatingExternalId=!1,t.$Progress.finish();case 14:r.next=20;break;case 16:r.prev=16,r.t0=r["catch"](0),t.updatingExternalId=!1,Promise.reject(r.t0);case 20:case"end":return r.stop()}}),r,null,[[0,16]])})))()},toggleExtEpisodeIdOp:function(e){this.$refs.extEpisodeIdOp.toggle(e)},generateEpisodeDetailHeader:function(e){var t="Episode Details for ".concat(this.patient.Name);return this.patient.Alias&&(t+=" (".concat(this.patient.Alias,")")),e.CareTypeText&&(t+=" - ".concat(e.CareTypeText)),e.BodyPartText&&(t+=" - ".concat(e.BodyPartText)),t},episodesWithStatusCount:function(e){return this.store.Episode.State.Episodes.filter((function(t){return t.Info===e})).length},toggleCard:function(e){var t=this.d_activeEpisodeFilters.indexOf(e);t>-1?this.d_activeEpisodeFilters.splice(t,1):this.d_activeEpisodeFilters.push(e),this.$emit("CardToggle",e)},formatDateTime:function(e){var t=new Date(e);if(null!==e&&1!==t.getFullYear())return t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear()},displayVisitForm:function(){this.$emit("DisplayVisit",this.selectedEpisode.ExternalEpisodeId)},displayDischargeForm:function(){this.$emit("DisplayDischarge",this.selectedEpisode.ExternalEpisodeId)},displaySurvey:function(){this.$emit("DisplaySurvey",this.selectedEpisode)},onRowExpand:function(e){var t=this;this.selectedEpisode=this.store.Episode.Get(e.data.EpisodeId),this.inContextExternalIdOption=this.episodesOfCare.filter((function(e){return t.selectedEpisode.ExternalEpisodeId.startsWith(e.id)}))[0],this.store.SetContextValue("SelectedEpisode",this.selectedEpisode)}}});st.render=Ve;var lt=st,dt=r("0ca6"),ut=r.n(dt),pt=Object(a["createVNode"])("div",{class:"layout-logo"},[Object(a["createVNode"])("img",{alt:"Logo",src:ut.a})],-1),bt={class:"layout-topbar"},ht={class:"layout-topbar-icons"},mt={class:"p-link"};function ft(e,t,r,n,i,o){var c=Object(a["resolveComponent"])("Avatar"),s=Object(a["resolveDirective"])("tooltip");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[pt,Object(a["createVNode"])("div",bt,[Object(a["createVNode"])("div",ht,[Object(a["createVNode"])("button",mt,[Object(a["withDirectives"])(Object(a["createVNode"])(c,{icon:"pi pi-user",size:"large",label:e.initials},null,8,["label"]),[[s,"Welcome".concat(e.firstName?", "+e.firstName:""),void 0,{left:!0}]])])])])],64)}r("b0c0");var vt=Object(x["z"])({name:"AppTopBar",setup:function(){var e=Object(a["inject"])("store"),t=e.Fhir.State.Context.Practitioner,r=null,n=null;if((null===t||void 0===t?void 0:t.name.length)>0){var i=null===t||void 0===t?void 0:t.name[0].family;(null===t||void 0===t?void 0:t.name[0].given.length)>0&&(r=t.name[0].given[0]),r&&(n=r[0]),i&&(n+=i[0])}return{firstName:r,initials:n}}});vt.render=ft;var Ot=vt,gt={class:"layout-profile"},jt={class:"p-col-12"},yt={class:"ta-c m-b-_5 m-t-1"},xt={class:"ta-c fw-500 text-500"},St={class:"layout-menu-container"},wt={class:"p-col-12"},Ct=Object(a["createVNode"])("span",null,"Demographics",-1),Vt=Object(a["createVNode"])("h5",{class:"p-m-0 ta-c"},"General",-1),kt=Object(a["createVNode"])("h5",{class:"p-m-0 ta-c"},"Address",-1),Nt=Object(a["createVNode"])("h5",{class:"p-m-0 ta-c"},"Communication",-1),It=Object(a["createVNode"])("span",null,"Episode",-1),Et={key:0},Dt={class:"p-m-0 ta-c"},Rt={key:1,class:"p-datatable p-component p-datatable-gridlines p-datatable-sm"},Tt=Object(a["createVNode"])("div",{class:"p-datatable-header"},[Object(a["createVNode"])("h5",{class:"p-m-0 ta-c"},"Associated Episodes")],-1),Pt=Object(a["createVNode"])("div",{class:"p-datatable-wrapper"},[Object(a["createVNode"])("table",{role:"table",class:"p-datatable-table"},[Object(a["createVNode"])("tbody",{role:"rowgroup",class:"p-datatable-tbody"},[Object(a["createVNode"])("tr",{role:"row",colspan:"12"},[Object(a["createVNode"])("td",{role:"cell",class:"ta-c",colspan:"12"},"No active episodes found")])])])],-1),At=Object(a["createVNode"])("span",null,"Encounter",-1),Bt=Object(a["createVNode"])("h5",{class:"p-m-0 ta-c"},"Details",-1),Ft={key:0,class:"p-datatable p-component p-datatable-gridlines p-datatable-sm"},Lt={class:"p-datatable-header"},_t={class:"p-m-0 ta-c"},Mt={class:"p-datatable-wrapper"},$t={role:"table",class:"p-datatable-table"},Gt={role:"row",colspan:"12"},Ut={role:"cell",class:"ta-c",colspan:"12"},qt={key:1,class:"p-datatable p-component p-datatable-sm"},zt={class:"p-datatable-header"},Ht={class:"p-m-0 ta-c"},Wt={class:"p-datatable-wrapper"},Jt={role:"table",class:"p-datatable-table"};function Kt(e,t,r,n,i,o){var c=Object(a["resolveComponent"])("font-awesome-icon"),s=Object(a["resolveComponent"])("Avatar"),l=Object(a["resolveComponent"])("Card"),d=Object(a["resolveComponent"])("Column"),u=Object(a["resolveComponent"])("DataTable"),p=Object(a["resolveComponent"])("AccordionTab"),b=Object(a["resolveComponent"])("Accordion");return Object(a["openBlock"])(),Object(a["createBlock"])(l,{class:"layout-sidebar"},{content:Object(a["withCtx"])((function(){return[Object(a["createVNode"])("div",gt,[Object(a["createVNode"])("div",jt,[Object(a["createVNode"])(l,{class:"bs-none"},{content:Object(a["withCtx"])((function(){var t,r,n,i;return["female"===(null===(t=e.patient)||void 0===t||null===(r=t.gender)||void 0===r?void 0:r.toLowerCase())?(Object(a["openBlock"])(),Object(a["createBlock"])(s,{key:0,class:"text-pink-400 bg-pink-100 h-8-r w-8-r fs-5-r bg-s-b female-avatar",size:"xlarge",shape:"circle"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(c,{icon:"venus"})]})),_:1})):"male"===(null===(n=e.patient)||void 0===n||null===(i=n.gender)||void 0===i?void 0:i.toLowerCase())?(Object(a["openBlock"])(),Object(a["createBlock"])(s,{key:1,class:"text-blue-400 bg-blue-100 h-8-r w-8-r fs-5-r bg-s-b male-avatar",size:"xlarge",shape:"circle"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(c,{icon:"mars"})]})),_:1})):(Object(a["openBlock"])(),Object(a["createBlock"])(s,{key:2,class:"h-8-r w-8-r fs-5-r bg-s-b text-purple-400 bg-purple-100",size:"xlarge",shape:"circle"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(c,{icon:"genderless"})]})),_:1}))]})),footer:Object(a["withCtx"])((function(){var t,r,n,i;return[Object(a["createVNode"])("h2",yt,Object(a["toDisplayString"])(null===(t=e.patient)||void 0===t||null===(r=t.name[0])||void 0===r?void 0:r.text),1),Object(a["createVNode"])("p",xt,Object(a["toDisplayString"])(e.age)+" year old "+Object(a["toDisplayString"])(null===(n=e.patient)||void 0===n||null===(i=n.gender)||void 0===i?void 0:i.toLowerCase()),1)]})),_:1})])]),Object(a["createVNode"])("div",St,[Object(a["createVNode"])("div",wt,[Object(a["createVNode"])(b,{multiple:!1},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(p,null,{header:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(c,{class:"m-r-5 fs-1_2 min-w-1",icon:"user"}),Ct]})),default:Object(a["withCtx"])((function(){var t,r;return[Object(a["createVNode"])(u,{autoLayout:!0,value:e.demographics,class:"p-datatable-sm app-menu-demographic-table hide-header br-tl-5 br-tr-5",responsiveLayout:"scroll"},{header:Object(a["withCtx"])((function(){return[Vt]})),default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(d,{field:"key"}),Object(a["createVNode"])(d,{class:"ta-r",field:"value"})]})),_:1},8,["value"]),(null===(t=e.patient)||void 0===t?void 0:t.address.length)>0?(Object(a["openBlock"])(),Object(a["createBlock"])(u,{key:0,autoLayout:!0,value:e.patient.address,class:"p-datatable-sm hide-header br-bl-5 br-br-5",responsiveLayout:"scroll"},{header:Object(a["withCtx"])((function(){return[kt]})),default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(d,{field:"use"},{body:Object(a["withCtx"])((function(t){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.capitalizeFirstLetter(t.data.use)),1)]})),_:1}),Object(a["createVNode"])(d,{class:"ta-r",field:"line[0]"},{body:Object(a["withCtx"])((function(e){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.data.line[0])+", "+Object(a["toDisplayString"])(e.data.city)+", "+Object(a["toDisplayString"])(e.data.state)+", "+Object(a["toDisplayString"])(e.data.postalCode),1)]})),_:1})]})),_:1},8,["value"])):Object(a["createCommentVNode"])("",!0),(null===(r=e.patient)||void 0===r?void 0:r.telecom.length)>0?(Object(a["openBlock"])(),Object(a["createBlock"])(u,{key:1,autoLayout:!0,value:e.patient.telecom,class:"p-datatable-sm hide-header br-bl-5 br-br-5",responsiveLayout:"scroll"},{header:Object(a["withCtx"])((function(){return[Nt]})),default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(d,{field:"system"},{body:Object(a["withCtx"])((function(t){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.capitalizeFirstLetter(t.data.system)),1)]})),_:1}),Object(a["createVNode"])(d,{class:"ta-r",field:"value"})]})),_:1},8,["value"])):Object(a["createCommentVNode"])("",!0)]})),_:1}),Object(a["createVNode"])(p,null,{header:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(c,{class:"m-r-5 fs-1_2 min-w-1",icon:"book-medical"}),It]})),default:Object(a["withCtx"])((function(){var t;return[(null===(t=e.d_store.Fhir.State.Context.EpisodeOfCare)||void 0===t?void 0:t.length)>0?(Object(a["openBlock"])(),Object(a["createBlock"])("div",Et,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.d_store.Fhir.State.Context.EpisodeOfCare,(function(t){return Object(a["openBlock"])(),Object(a["createBlock"])(u,{autoLayout:!0,key:t.id,value:e.populateEpisodeDetails(t),class:"p-datatable-sm hide-header br-bl-5 br-br-5",responsiveLayout:"scroll"},{header:Object(a["withCtx"])((function(){return[Object(a["createVNode"])("h5",Dt,Object(a["toDisplayString"])("".concat(t.period.start).concat(t.period.end?" - "+t.period.end:"")),1)]})),default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(d,{field:"key"}),Object(a["createVNode"])(d,{class:"ta-r",field:"value"})]})),_:2},1032,["value"])})),128))])):(Object(a["openBlock"])(),Object(a["createBlock"])("div",Rt,[Tt,Pt]))]})),_:1}),Object(a["createVNode"])(p,null,{header:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(c,{class:"m-r-5 fs-1_2 min-w-1",icon:"calendar-day"}),At]})),default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(u,{autoLayout:!0,value:e.encounter,class:"p-datatable-sm hide-header br-bl-5 br-br-5",responsiveLayout:"scroll"},{header:Object(a["withCtx"])((function(){return[Bt]})),default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(d,{field:"key"}),Object(a["createVNode"])(d,{class:"ta-r",field:"value"})]})),_:1},8,["value"])]})),_:1}),(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.lists,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])(p,{key:e.name},{header:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(c,{class:"m-r-5 fs-1_2 min-w-1",icon:"Allergies"===e.name?"allergies":"Immunizations"===e.name?"syringe":"Medications"===e.name?"prescription-bottle-alt":"exclamation-triangle"},null,8,["icon"]),Object(a["createVNode"])("span",null,Object(a["toDisplayString"])(e.name),1)]})),default:Object(a["withCtx"])((function(){return[e.data&&(1===e.data.length&&e.data[0].emptyReason||0===e.data.length)?(Object(a["openBlock"])(),Object(a["createBlock"])("div",Ft,[Object(a["createVNode"])("div",Lt,[Object(a["createVNode"])("h5",_t,"Active "+Object(a["toDisplayString"])(e.name),1)]),Object(a["createVNode"])("div",Mt,[Object(a["createVNode"])("table",$t,[Object(a["createVNode"])("tbody",{role:"rowgroup",class:"p-datatable-tbody",id:"list-table-body-"+e.name},[Object(a["createVNode"])("tr",Gt,[Object(a["createVNode"])("td",Ut,"No active "+Object(a["toDisplayString"])(e.name)+" found",1)])],8,["id"])])])])):(Object(a["openBlock"])(),Object(a["createBlock"])("div",qt,[Object(a["createVNode"])("div",zt,[Object(a["createVNode"])("h5",Ht,"Active "+Object(a["toDisplayString"])(e.name),1)]),Object(a["createVNode"])("div",Wt,[Object(a["createVNode"])("table",Jt,[Object(a["createVNode"])("tbody",{role:"rowgroup",class:"p-datatable-tbody",id:"list-table-body-"+e.name},null,8,["id"])])])]))]})),_:2},1024)})),128))]})),_:1})])])]})),_:1})}var Xt=r("2909"),Qt=(r("159b"),r("6062"),r("3ca3"),r("ddb0"),r("d81d"),r("4e82"),r("fb6a"),r("a15b"),Object(x["z"])({name:"AppSidebar",setup:function(){return{d_store:Object(a["inject"])("store")}},data:function(){var e,t,r,n;return{lists:[{name:"Allergies",data:null===(e=this.d_store.Fhir.State.Context.Allergies)||void 0===e?void 0:e.filter((function(e){return"current"===e.status})),useFullRow:!1},{name:"Immunizations",data:null===(t=this.d_store.Fhir.State.Context.Immunizations)||void 0===t?void 0:t.filter((function(e){return"current"===e.status})),useFullRow:!1},{name:"Medications",data:null===(r=this.d_store.Fhir.State.Context.Medications)||void 0===r?void 0:r.filter((function(e){return"current"===e.status})),useFullRow:!1},{name:"Problems",data:null===(n=this.d_store.Fhir.State.Context.Problems)||void 0===n?void 0:n.filter((function(e){return"current"===e.status})),useFullRow:!0}],patient:this.d_store.Fhir.State.Context.Patient}},mounted:function(){var e=this;this.lists.forEach((function(t){var r,n;t.data&&(null===(r=t.data[0])||void 0===r||null===(n=r.entry)||void 0===n?void 0:n.length)>1&&e.generateListTableBody(t.name,t.data[0].entry,t.useFullRow)}))},computed:{age:function(){var e,t=new Date,r=new Date(null===(e=this.patient)||void 0===e?void 0:e.birthDate),n=t.getFullYear()-r.getFullYear(),a=t.getMonth()-r.getMonth();return a<0||0===a&&t.getDate()<r.getDate()?n-1:n},demographics:function(){var e;return[{key:"Birth Day",value:null===(e=this.patient)||void 0===e?void 0:e.birthDate},{key:"Alias",value:this.getIdentifierValue("mychartlogin")},{key:"Birth Sex",value:this.getExtensionValue("us-core-birthsex")},{key:"Race",value:this.getExtensionValue("us-core-race")},{key:"Ethnicity",value:this.getExtensionValue("us-core-ethnicity")}]},encounter:function(){var e,t=this.d_store.Fhir.State.Context.Encounter,r=[],n=null===t||void 0===t?void 0:t.period.start;(null!==t&&void 0!==t&&t.period.end&&(n+=" - ".concat(t.period.end)),n&&r.push({key:"Period",value:n}),null!==t&&void 0!==t&&t.status&&r.push({key:"Status",value:this.capitalizeFirstLetter(t.status)}),(null===t||void 0===t?void 0:t.type.length)>0)&&r.push({key:"Type",value:null===(e=t.type[0])||void 0===e?void 0:e.text});return(null===t||void 0===t?void 0:t.location.length)>0&&r.push({key:"Location",value:t.location[0].location.display}),r}},methods:{generateListTableBody:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n='<tr role="row" colspan="12">',a=Object(Xt["a"])(new Set(t.slice().sort((function(e,t){return e.item.display.localeCompare(t.item.display)})).map((function(e){return e.item.display}))));if(r)a.forEach((function(e){n+='<tr><td role="cell">'.concat(e,"</td></tr>")}));else{var i=0;a.forEach((function(e){n+='<td role="cell" colspan="6">'.concat(e,i%2===0?"</td>":"</td></tr>"),i++})),a&&0!==a.length&&a.length%2!==0?n+="<td role='cell' colspan='6'></td></tr>":n+="</tr>"}var o=document.querySelector("#list-table-body-".concat(e));o&&(o.innerHTML=n)},populateEpisodeDetails:function(e){var t=[],r=null===e||void 0===e?void 0:e.type.map((function(e){return"".concat(e.text)})).join(", "),n=null===e||void 0===e?void 0:e.diagnosis.map((function(e){return"".concat(e.condition.display)})).join(", ");return null!==e&&void 0!==e&&e.status&&t.push({key:"Status",value:this.capitalizeFirstLetter(null===e||void 0===e?void 0:e.status)}),n&&t.push({key:"Condition",value:n}),r&&t.push({key:"Type",value:r}),t},getIdentifierValue:function(e){var t,r=null===(t=this.patient)||void 0===t?void 0:t.identifier.filter((function(t){var r,n;return(null===(r=t.type)||void 0===r||null===(n=r.text)||void 0===n?void 0:n.toLowerCase())===e}));return r&&r.length>0?r[0].value:"--"},getExtensionValue:function(e){var t,r=null===(t=this.patient)||void 0===t?void 0:t.extension.filter((function(t){return t.url.toLowerCase().includes(e)}))[0],n=null;if(r)if(r.extension&&r.extension.length>0){var a,i=r.extension.filter((function(e){return"ombCategory"===e.url.toLowerCase()}))[0];if(!i)return null===(a=r.extension.filter((function(e){return"text"===e.url.toLowerCase()}))[0])||void 0===a?void 0:a.valueString;n=i}else{if(r.valueString)return r.valueString;if(r.valueCode)return r.valueCode;r.valueCodeableConcept&&(n=r.valueCodeableConcept.coding[0])}if(n){if(n.valueCoding.code&&n.valueCoding.dispaly)return"(".concat(n.valueCoding.code,") ").concat(n.valueCoding.display);if(n.valueCoding.code)return"".concat(n.valueCoding.code);if(n.valueCoding.display)return"".concat(n.valueCoding.display)}return"--"},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}}}));Qt.render=Kt;var Yt=Qt,Zt=r("d4ec"),er=r("bee2"),tr=(r("ac1f"),r("1276"),r("25f0"),r("5319"),function(){function e(t){Object(Zt["a"])(this,e),this.activeEpisodeFilters=[ct["a"].InProgress,ct["a"].IntakeOverdue,ct["a"].StatusOverdue,ct["a"].Close,ct["a"].Inactive],this.userId=t,this.menuActive=!0,this.overlayMenuActive=!1,this.loading=!0,this.mobileMenuActive=!1,this.menuClick=!1,this.staticMenuInactive=!1,this.colorMode=localStorage.getItem("nh-foto-sof-color-mode-".concat(t)),this.mode="overlay"===localStorage.getItem("nh-foto-sof-sidebar-mode-".concat(t))?"overlay":"static",this.showDischargedEpisodes="false"!==localStorage.getItem("nh-foto-sof-show-discharged-episodes-".concat(t));var r=localStorage.getItem("nh-foto-sof-active-episode-filters-".concat(t));r&&(this.activeEpisodeFilters=r.split(",").map((function(e){return parseInt(e)}))),"dark"===this.colorMode?this.setDark():this.setLight()}return Object(er["a"])(e,[{key:"toggleMode",value:function(){this.mode="overlay"===this.mode?"static":"overlay",localStorage.setItem("nh-foto-sof-sidebar-mode-".concat(this.userId),this.mode)}},{key:"toggleColorMode",value:function(){"dark"===this.colorMode?this.setLight():this.setDark(),localStorage.setItem("nh-foto-sof-color-mode-".concat(this.userId),this.colorMode)}},{key:"toggleDischargeView",value:function(){this.showDischargedEpisodes=!this.showDischargedEpisodes,localStorage.setItem("nh-foto-sof-show-discharged-episodes-".concat(this.userId),this.showDischargedEpisodes.toString())}},{key:"onCardToggle",value:function(){localStorage.setItem("nh-foto-sof-active-episode-filters-".concat(this.userId),this.activeEpisodeFilters.join(","))}},{key:"setDark",value:function(){var e=document.querySelector("body"),t=document.getElementById("theme-link");t.setAttribute("href",t.getAttribute("href").replace("light","dark")),e.classList.remove("light"),this.colorMode="dark",e.classList.add("dark")}},{key:"setLight",value:function(){var e=document.querySelector("body"),t=document.getElementById("theme-link");t.setAttribute("href",t.getAttribute("href").replace("dark","light")),e.classList.remove("dark"),this.colorMode="light",e.classList.add("light")}}]),e}()),rr={class:"confirmation-content"},nr={key:"1",class:"p-grid"},ar={class:"p-col-12 p-lg-12"},ir={style:{"text-align":"center",margin:".5em"}},or={key:0,class:"p-col-12 p-md-6"},cr=Object(a["createVNode"])("span",{class:"p-button-label p-text-bold"},"Launch",-1),sr={key:1,class:"p-col-12 p-md-6"},lr=Object(a["createVNode"])("span",{class:"p-button-label p-text-bold"},"Email",-1),dr={key:2,class:"p-col-10 p-md-10 p-md-offset-1"},ur=Object(a["createVNode"])("span",{class:"p-button-label p-text-bold"},"Launch",-1),pr={key:"2",class:"p-grid"},br={class:"p-col-12 p-lg-12",style:{"margin-top":"1rem"}},hr={class:"p-col-12 p-lg-12"},mr={class:"p-col-12 p-md-6"},fr={class:"p-col-12 p-md-6"};function vr(e,t,r,n,i,o){var c=Object(a["resolveComponent"])("Tag"),s=Object(a["resolveComponent"])("font-awesome-icon"),l=Object(a["resolveComponent"])("Button"),d=Object(a["resolveComponent"])("Skeleton");return Object(a["openBlock"])(),Object(a["createBlock"])("div",rr,[Object(a["createVNode"])(a["Transition"],{name:"fade",mode:"out-in"},{default:Object(a["withCtx"])((function(){return[e.loading?(Object(a["openBlock"])(),Object(a["createBlock"])("div",pr,[Object(a["createVNode"])("div",br,[Object(a["createVNode"])(d,{size:"130px",class:"center"})]),Object(a["createVNode"])("div",hr,[Object(a["createVNode"])(d,{class:"center m-b-_5-e m-t-_5-e",height:"1.5rem",width:"45%"})]),Object(a["createVNode"])("div",mr,[Object(a["createVNode"])(d,{height:"3rem",width:"100%"})]),Object(a["createVNode"])("div",fr,[Object(a["createVNode"])(d,{height:"3rem",width:"100%"})])])):(Object(a["openBlock"])(),Object(a["createBlock"])("div",nr,[Object(a["createVNode"])("div",ar,[Object(a["createVNode"])("img",{src:e.surveyDetails.QrCode,class:"center",alt:"Episode Survery QR Code"},null,8,["src"]),Object(a["createVNode"])("p",ir,[Object(a["createVNode"])(c,{severity:"success",icon:"pi pi-info-circle"},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])("Access Code: "+Object(a["toDisplayString"])(e.surveyDetails.LobbyCode),1)]})),_:1})])]),"Practitioner"===e.store.Fhir.State.Context.LaunchedByResource?(Object(a["openBlock"])(),Object(a["createBlock"])("div",or,[Object(a["createVNode"])(l,{onClick:e.launchSurvey,class:"p-button",style:{width:"100%"}},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(s,{icon:"rocket",class:"p-button-icon p-button-left"}),cr]})),_:1},8,["onClick"])])):Object(a["createCommentVNode"])("",!0),"Practitioner"===e.store.Fhir.State.Context.LaunchedByResource?(Object(a["openBlock"])(),Object(a["createBlock"])("div",sr,[Object(a["createVNode"])(l,{disabled:!e.validEmail,loading:e.sending,onClick:e.sendEmail,class:"p-button",style:{width:"100%"}},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(s,{icon:"envelope",class:"p-button-icon p-button-left"}),lr]})),_:1},8,["disabled","loading","onClick"])])):Object(a["createCommentVNode"])("",!0),"Practitioner"!==e.store.Fhir.State.Context.LaunchedByResource?(Object(a["openBlock"])(),Object(a["createBlock"])("div",dr,[Object(a["createVNode"])(l,{onClick:e.launchSurvey,class:"p-button",style:{width:"100%"}},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(s,{icon:"rocket",class:"p-button-icon p-button-left"}),ur]})),_:1},8,["onClick"])])):Object(a["createCommentVNode"])("",!0)]))]})),_:1})])}var Or=function e(t,r){Object(Zt["a"])(this,e),this.ToAddress=t,this.ToName=r},gr=function e(){Object(Zt["a"])(this,e),this.Url="",this.LobbyCode="",this.QrCode=""},jr=Object(x["z"])({name:"SurveyDetailContent",setup:function(){return{store:Object(a["inject"])("store")}},props:{episodeId:Number},created:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.patient=e.store.GetContextValue("FotoPatient"),t.next=3,e.store.Episode.GetSurvey(e.episodeId);case 3:e.surveyDetails=t.sent,e.loading=!1;case 5:case"end":return t.stop()}}),t)})))()},data:function(){return{sending:!1,loading:!0,patient:null,surveyDetails:new gr}},methods:{launchSurvey:function(){window.open(this.surveyDetails.Url),this.store.AddLog("Launched survey ".concat(this.surveyDetails.Url))},sendEmail:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.store.AddLog("Sending survey email for episode ".concat(e.episodeId," to email ").concat(e.patient.Email)),e.$Progress.start(),e.sending=!0,r=new Or(e.patient.Email,e.patient.Name),t.next=7,e.store.Episode.Get(e.episodeId);case 7:return n=t.sent,t.next=10,e.store.Artifact.ForEpisode(n.ExternalEpisodeId);case 10:return n.Artifacts=t.sent,0===n.Artifacts.length?r.Content="<p>Hi ".concat(e.patient.firstName,',</p><p>The comprehensive evaluation that you will have to start your therapy treatment includes a \n                        computerized functional assessment that will help your clinician better understand your condition and how it impacts your quality of life. \n                        This information will help your clinician develop treatment goals with you and is an important part of your treatment.</p><p>You have the option of completing \n                        the survey online prior to your first appointment, rather than in the clinic before your first treatment.</p><p>Please click the link to take your survey.  \n                        <a href="').concat(e.surveyDetails.Url,'">').concat(e.surveyDetails.Url,"</a></p><p>The information you share is confidential, a part of your medical record, and is subject to all \n                        protected health care information regulations.</p><p>Thank you,</p><p>FOTO</p>"):r.Content="<p>Hi ".concat(e.patient.firstName,',</p><p>At the beginning of your therapy treatment you completed a computerized functional assessment related to your impairment. \n                        Please complete the questionnaire again to reassess how the treatment for your impairment has helped to improve your function and pain. You will also have the opportunity \n                        to respond regarding your satisfaction with several aspects of your treatment.</p><p>Please click the link to take your survey. <a href="').concat(e.surveyDetails.Url,'">').concat(e.surveyDetails.Url,"</a></p>\n                        <p>The information you share is confidential, a part of your medical record, and is subject to all protected health care information regulations.</p><p>Thank you,</p><p>FOTO</p></p>"),t.next=14,e.store.Artifact.EmailSurveyInformation(r);case 14:e.sending=!1,e.$Progress.finish(),t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](0),Promise.reject(t.t0);case 21:case"end":return t.stop()}}),t,null,[[0,18]])})))()}},computed:{validEmail:function(){return this.patient.email&&-1!==this.patient.email.indexOf("@")&&-1!==this.patient.email.indexOf(".")}}});jr.render=vr;var yr=jr,xr={class:"p-field p-col-12 p-md-6"},Sr={class:"p-float-label"},wr=Object(a["createVNode"])("label",{for:"clinic"},"Clinic",-1),Cr={key:0,class:"p-error"},Vr={class:"p-field p-col-12 p-md-6"},kr={class:"p-float-label"},Nr=Object(a["createVNode"])("label",{for:"clinician"},"Clinician",-1),Ir={key:0,class:"p-error"},Er={class:"p-field p-col-12 p-md-6"},Dr={class:"p-float-label"},Rr=Object(a["createVNode"])("label",{for:"careType"},"Care Type",-1),Tr={key:0,class:"p-error"},Pr={class:"p-field p-col-12 p-md-6"},Ar={class:"p-float-label"},Br=Object(a["createVNode"])("label",{for:"bodypart"},"Body Part/Condition",-1),Fr={key:0,class:"p-error"},Lr={class:"p-field p-col-12 p-md-6"},_r={class:"p-float-label"},Mr=Object(a["createVNode"])("label",{for:"impairment"},"Impairment",-1),$r={key:0,class:"p-error"},Gr={class:"p-field p-col-12 p-md-6"},Ur={class:"p-float-label"},qr=Object(a["createVNode"])("label",{for:"surgeryType"},"Surgery Type",-1),zr={class:"p-field p-col-12 p-md-6"},Hr={class:"p-float-label"},Wr=Object(a["createVNode"])("label",{for:"payerSource"},"Payer Source",-1),Jr={key:0,class:"p-error"},Kr={class:"p-field p-col-12 p-md-6"},Xr={class:"p-float-label"},Qr=Object(a["createVNode"])("label",{for:"payerSource"},"Primary Measure",-1),Yr={class:"p-field p-col-12 p-md-12"},Zr={class:"p-float-label"},en=Object(a["createVNode"])("label",{for:"clinic"},"Secondary Measure",-1),tn={class:"p-field p-col-12 p-md-12"},rn={class:"p-float-label"},nn={key:0},an={key:1},on=Object(a["createVNode"])("label",{for:"externalEpisodeId"},"Epic Episode",-1),cn={key:0,class:"p-error center"},sn=Object(a["createVNode"])("div",{class:"p-col-12 p-md-8"},null,-1),ln={class:"p-col-12 p-md-4"};function dn(e,t,r,n,i,o){var c,s=Object(a["resolveComponent"])("Dropdown"),l=Object(a["resolveComponent"])("MultiSelect"),d=Object(a["resolveComponent"])("Divider"),u=Object(a["resolveComponent"])("Button");return Object(a["openBlock"])(),Object(a["createBlock"])("form",{autocomplete:"off",onSubmit:t[19]||(t[19]=Object(a["withModifiers"])((function(t){return e.submit(!e.v$.$invalid)}),["prevent"])),class:"p-fluid p-grid"},[Object(a["createVNode"])("div",xr,[Object(a["createVNode"])("span",Sr,[Object(a["createVNode"])(s,{id:"clinic",onChange:t[1]||(t[1]=function(t){return e.processSelection("Clinic","Alias","SiteId","SiteText",!1)}),modelValue:e.episode.SiteId,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.episode.SiteId=t}),options:e.store.Code.State.Clinic,optionLabel:"Alias",optionValue:"Id",class:{"p-invalid":e.submitted&&e.v$.episode.SiteId.$invalid}},null,8,["modelValue","options","class"]),wr]),e.v$.episode.SiteId.$invalid&&e.submitted||e.v$.episode.SiteId.$pending.$response?(Object(a["openBlock"])(),Object(a["createBlock"])("small",Cr,"A clinic is required.")):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("div",Vr,[Object(a["createVNode"])("span",kr,[Object(a["createVNode"])(s,{id:"clinician",onChange:t[3]||(t[3]=function(t){return e.processSelection("Clinician","Name","TherapistId","TherapistName",!1)}),modelValue:e.episode.TherapistId,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.episode.TherapistId=t}),options:e.store.Code.State.Clinician,placeholder:"p-emptylabel",optionLabel:"Name",optionValue:"Id",class:{"p-invalid":e.submitted&&e.v$.episode.TherapistId.$invalid}},null,8,["modelValue","options","class"]),Nr]),e.v$.episode.TherapistId.$invalid&&e.submitted||e.v$.episode.TherapistId.$pending.$response?(Object(a["openBlock"])(),Object(a["createBlock"])("small",Ir,"A therapist is required.")):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("div",Er,[Object(a["createVNode"])("span",Dr,[Object(a["createVNode"])(s,{id:"careType",onChange:t[5]||(t[5]=function(t){return e.processSelection("CareType","Display","CareTypeId","CareTypeText",!0)}),modelValue:e.episode.CareTypeId,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.episode.CareTypeId=t}),options:e.store.Code.State.CareType,optionLabel:"Display",optionValue:"Value",class:{"p-invalid":e.submitted&&e.v$.episode.CareTypeId.$invalid}},null,8,["modelValue","options","class"]),Rr]),e.v$.episode.CareTypeId.$invalid&&e.submitted||e.v$.episode.CareTypeId.$pending.$response?(Object(a["openBlock"])(),Object(a["createBlock"])("small",Tr,"A care type is required.")):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("div",Pr,[Object(a["createVNode"])("span",Ar,[Object(a["createVNode"])(s,{loading:e.isLoadingOptions,id:"bodypart",onChange:t[7]||(t[7]=function(t){return e.processSelection("BodyPart","Display","BodyPartId","BodyPartText",!0)}),modelValue:e.episode.BodyPartId,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.episode.BodyPartId=t}),options:e.store.Code.State.BodyPart,optionLabel:"Display",optionValue:"Value",class:{"p-invalid":e.submitted&&!e.episode.BodyPartId&&!e.episode.ImpairmentId}},null,8,["loading","modelValue","options","class"]),Br]),e.episode.BodyPartId||e.episode.ImpairmentId||!e.submitted?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])("small",Fr,"A body part or impairment is required."))]),Object(a["createVNode"])("div",Lr,[Object(a["createVNode"])("span",_r,[Object(a["createVNode"])(s,{loading:e.isLoadingOptions,id:"impairment",onChange:t[9]||(t[9]=function(t){return e.processSelection("Impairment","Display","ImpairmentId","ImpairmentText",!0)}),modelValue:e.episode.ImpairmentId,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.episode.ImpairmentId=t}),options:e.store.Code.State.Impairment,optionLabel:"Display",optionValue:"Value",class:{"p-invalid":e.submitted&&!e.episode.BodyPartId&&!e.episode.ImpairmentId}},null,8,["loading","modelValue","options","class"]),Mr]),e.episode.BodyPartId||e.episode.ImpairmentId||!e.submitted?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])("small",$r,"An impairment or body part is required."))]),Object(a["createVNode"])("div",Gr,[Object(a["createVNode"])("span",Ur,[Object(a["createVNode"])(s,{loading:e.isLoadingOptions,id:"surgeryType",onChange:t[11]||(t[11]=function(t){return e.processSelection("SurgeryType","Display","SurgeryTypeId","SurgeryTypeText",!0)}),modelValue:e.episode.SurgeryTypeId,"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.episode.SurgeryTypeId=t}),options:e.store.Code.State.SurgeryType,optionLabel:"Display"},null,8,["loading","modelValue","options"]),qr])]),Object(a["createVNode"])("div",zr,[Object(a["createVNode"])("span",Hr,[Object(a["createVNode"])(s,{id:"payerSource",modelValue:e.episode.PayerSourceId,"onUpdate:modelValue":t[13]||(t[13]=function(t){return e.episode.PayerSourceId=t}),onChange:t[14]||(t[14]=function(t){return e.processSelection("PayerSource","Display","PayerSourceId","PayerSourceText",!1)}),options:e.store.Code.State.PayerSource,optionLabel:"Display",optionValue:"Value",class:{"p-invalid":e.submitted&&e.v$.episode.PayerSourceId.$invalid}},null,8,["modelValue","options","class"]),Wr]),e.v$.episode.PayerSourceId.$invalid&&e.submitted||e.v$.episode.PayerSourceId.$pending.$response?(Object(a["openBlock"])(),Object(a["createBlock"])("small",Jr,"A payer source is required.")):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("div",Kr,[Object(a["createVNode"])("span",Xr,[Object(a["createVNode"])(s,{id:"payerSource",loading:e.isLoadingOptions,onChange:t[15]||(t[15]=function(t){return e.processSelection("PrimaryMeasure","Display","PrimaryMeasureId","PrimaryMeasureText",!0)}),modelValue:e.episode.PrimaryMeasureId,"onUpdate:modelValue":t[16]||(t[16]=function(t){return e.episode.PrimaryMeasureId=t}),options:e.store.Code.State.PrimaryMeasure,optionLabel:"Display",optionValue:"Value"},null,8,["loading","modelValue","options"]),Qr])]),Object(a["createVNode"])("div",Yr,[Object(a["createVNode"])("span",Zr,[Object(a["createVNode"])(l,{showToggleAll:!1,loading:e.isLoadingOptions,modelValue:e.selectedSecondaryMeasures,"onUpdate:modelValue":t[17]||(t[17]=function(t){return e.selectedSecondaryMeasures=t}),options:e.store.Code.State.SecondaryMeasure,optionLabel:"Display",filter:!0,class:"multiselect-sec-measure"},{value:Object(a["withCtx"])((function(e){return[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.value,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{class:"sec-measure-item-value",key:e.code},[Object(a["createVNode"])("div",null,Object(a["toDisplayString"])(e.Display),1)])})),128)),e.value&&0!==e.value.length?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:0},[],64))]})),option:Object(a["withCtx"])((function(e){return[Object(a["createVNode"])("div",null,[Object(a["createVNode"])("div",null,Object(a["toDisplayString"])(e.option.Display),1)])]})),_:1},8,["loading","modelValue","options"]),en])]),Object(a["createVNode"])("div",tn,[Object(a["createVNode"])("span",rn,[Object(a["createVNode"])(s,{id:"externalEpisodeId",modelValue:e.selectedExternalIdOption,"onUpdate:modelValue":t[18]||(t[18]=function(t){return e.selectedExternalIdOption=t}),options:e.store.Fhir.State.Context.EpisodeOfCare,optionLabel:"active"},{value:Object(a["withCtx"])((function(e){var t;return[e.value?(Object(a["openBlock"])(),Object(a["createBlock"])("div",nn,Object(a["toDisplayString"])(e.value.period.start)+" "+Object(a["toDisplayString"])(e.value.period.end?" - "+e.value.period.end:"")+" "+Object(a["toDisplayString"])(null===(t=e.value.type[0])||void 0===t?void 0:t.text),1)):(Object(a["openBlock"])(),Object(a["createBlock"])("div",an," Â  "))]})),option:Object(a["withCtx"])((function(e){var t;return[Object(a["createVNode"])("div",null,Object(a["toDisplayString"])(e.option.period.start)+" "+Object(a["toDisplayString"])(e.option.period.end?" - "+e.option.period.end:"")+" "+Object(a["toDisplayString"])(null===(t=e.option.type[0])||void 0===t?void 0:t.text),1)]})),_:1},8,["modelValue","options"]),on]),null!==(c=e.selectedExternalIdOption)&&void 0!==c&&c.id||!e.submitted?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])("small",cn,"An epic episode is required."))]),Object(a["createVNode"])(d,{type:"dashed"}),sn,Object(a["createVNode"])("div",ln,[Object(a["createVNode"])(u,{type:"submit",label:"Submit",loading:e.loading,icon:"pi pi-check",class:""},null,8,["loading"])])],32)}var un=r("25a0"),pn=r("e3e1"),bn=r("d064"),hn=Object(x["z"])({name:"EpisodeCreationForm",setup:function(){var e=Object(a["inject"])("store"),t=e.GetContextValue("FotoPatient");return{loading:!1,store:e,patient:t,v$:Object(un["a"])()}},data:function(){return{selectedExternalIdOption:null,selectedSecondaryMeasures:null,episode:new bn["a"],submitted:!1,isLoadingOptions:!1}},created:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.store.Code.SetClinics();case 2:return t.next=4,e.store.Code.SetClinicians();case 4:return t.next=6,e.store.Code.SetCareTypes();case 6:return t.next=8,e.store.Code.SetPayerSource();case 8:r=e.store.Fhir.State.Context.EpisodeOfCare,1===(null===r||void 0===r?void 0:r.length)&&(e.selectedExternalIdOption=r[0]);case 10:case"end":return t.stop()}}),t)})))()},methods:{processSelection:function(e,t,r,a,i){var o=this;return Object(n["a"])(regeneratorRuntime.mark((function n(){var c,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,c=o.episode[r],s=o.store.Code.State[e].filter((function(e){return(null===e||void 0===e?void 0:e.Id)==c||(null===e||void 0===e?void 0:e.Value)==c}))[0],o.episode[a]=s[t],!i){n.next=7;break}return n.next=7,o.updateOptions(e);case 7:n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](0),Promise.reject(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})))()},submit:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.submitted=!0,n=null===(r=e.selectedExternalIdOption)||void 0===r?void 0:r.id,t.prev=2,e.v$.episode.$invalid||!n){t.next=19;break}return e.loading=!0,e.$Progress.start(),a=e.store.Episode.FilterLocal((function(e){e.ExternalEpisodeId})),a&&a.length>0&&(n+="_".concat(a.length)),e.episode.SecondaryBallotText=e.episode.SecondaryMeasureIds.map((function(e){return e.Display})).join(","),e.episode.SecondaryMeasureIds=e.selectedSecondaryMeasures.map((function(e){return e.Value})),e.episode.CreateDate=new Date,e.episode.ExternalPatientId=e.patient.ExternalID,e.episode.ExternalEpisodeId=n,e.store.AddLog("Creating episode",e.episode),t.next=16,e.store.Episode.Add(e.episode);case 16:e.$emit("close"),e.$Progress.finish(),e.loading=!1;case 19:t.next=24;break;case 21:t.prev=21,t.t0=t["catch"](2),Promise.reject(t.t0);case 24:case"end":return t.stop()}}),t,null,[[2,21]])})))()},updateOptions:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isLoadingOptions=!0,e.prev=1,this.store.AddLog("Updating option values for episode creation, with the current values set as",this.episode),"caretype"===t.toLocaleLowerCase()?(this.episode.BodyPartId=null,this.episode.ImpairmentId=null,this.episode.PrimaryMeasureId=null,this.episode.SecondaryMeasureIds=[]):"bodypart"===t.toLocaleLowerCase()?(this.episode.ImpairmentId=null,this.episode.PrimaryMeasureId=null,this.episode.SecondaryMeasureIds=[]):"impairment"===t.toLocaleLowerCase()&&(this.episode.PrimaryMeasureId=null,this.episode.SecondaryMeasureIds=[]),n=[],null===this.episode.CareTypeId){e.next=20;break}return e.next=8,this.store.Code.SetBodyParts(this.episode.CareTypeId);case 8:if(null===this.episode.BodyPartId){e.next=17;break}return e.next=11,this.store.Code.SetImpairments(this.episode.CareTypeId,this.episode.BodyPartId);case 11:if(n=e.sent,null===this.episode.ImpairmentId){e.next=15;break}return e.next=15,this.store.Code.SetSurgeryTypes(this.episode.BodyPartId,this.episode.ImpairmentId);case 15:e.next=20;break;case 17:return e.next=19,this.store.Code.SetImpairments(this.episode.CareTypeId);case 19:n=e.sent;case 20:if(1===(null===(r=n)||void 0===r?void 0:r.length)&&(this.episode.ImpairmentId=n[0].Value,this.processSelection("Impairment","Display","ImpairmentId","ImpairmentText",!1)),null===this.episode.SiteId||!(null!==this.episode.BodyPartId&&-1!==this.episode.BodyPartId||null!==this.episode.ImpairmentId&&-1!==this.episode.ImpairmentId)){e.next=29;break}return e.next=24,this.store.Code.SetPrimaryMeasure(this.episode.SiteId,this.episode.CareTypeId,null!==this.episode.BodyPartId?this.episode.BodyPartId:-1,null!==this.episode.ImpairmentId?this.episode.ImpairmentId:-1);case 24:if(a=e.sent,(null===a||void 0===a?void 0:a.length)>0&&(this.episode.PrimaryMeasureId=a[0].Value,this.processSelection("PrimaryMeasure","Display","PrimaryMeasureId","PrimaryMeasureText",!1)),null===this.episode.PrimaryMeasureId){e.next=29;break}return e.next=29,this.store.Code.SetSecondaryMeasure(this.episode.SiteId,this.episode.CareTypeId,null!==this.episode.BodyPartId?this.episode.BodyPartId:-1,null!==this.episode.ImpairmentId?this.episode.ImpairmentId:-1,this.episode.PrimaryMeasureId);case 29:e.next=34;break;case 31:e.prev=31,e.t0=e["catch"](1),Promise.reject(e.t0);case 34:this.isLoadingOptions=!1;case 35:case"end":return e.stop()}}),e,this,[[1,31]])})));function t(t){return e.apply(this,arguments)}return t}()},validations:function(){return{episode:{SiteId:{required:pn["a"]},TherapistId:{required:pn["a"]},CareTypeId:{required:pn["a"]},PayerSourceId:{required:pn["a"]}}}}});hn.render=dn;var mn=hn,fn={class:"p-field p-col-12 p-md-12"},vn={class:"p-float-label"},On=Object(a["createVNode"])("label",{for:"clinicianType"},"Clinician Type",-1),gn={key:0,class:"p-error"},jn={class:"p-field p-col-12 p-md-12"},yn={class:"p-float-label"},xn=Object(a["createVNode"])("label",{for:"visitDate"},"Visit Date",-1),Sn={key:0,class:"p-error"},wn={class:"p-field p-col-12 p-md-12"},Cn={class:"p-float-label"},Vn=Object(a["createVNode"])("label",{for:"minutesSpent"},"Length",-1),kn={key:0,class:"p-error"},Nn={class:"p-field p-col-12 p-md-12"},In={class:"p-float-label"},En=Object(a["createVNode"])("label",{for:"revenue"},"Revenue",-1),Dn={key:0,class:"p-error"},Rn={class:"p-grid"},Tn=Object(a["createVNode"])("div",{class:"p-col-12 p-md-8"},null,-1),Pn={class:"p-col-12 p-md-4"};function An(e,t,r,n,i,o){var c=Object(a["resolveComponent"])("Dropdown"),s=Object(a["resolveComponent"])("Calendar"),l=Object(a["resolveComponent"])("InputNumber"),d=Object(a["resolveComponent"])("Divider"),u=Object(a["resolveComponent"])("Button");return Object(a["openBlock"])(),Object(a["createBlock"])("form",{autocomplete:"off",onSubmit:t[5]||(t[5]=Object(a["withModifiers"])((function(t){return e.submit(!e.v$.$invalid)}),["prevent"])),class:"p-fluid"},[Object(a["createVNode"])("div",fn,[Object(a["createVNode"])("span",vn,[Object(a["createVNode"])(c,{id:"clinicianType",modelValue:e.visit.ClinicianType,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.visit.ClinicianType=t}),options:e.options.clinicianType,optionLabel:"display",optionValue:"value",class:{"p-invalid":e.submitted&&e.v$.visit.ClinicianType.$invalid}},null,8,["modelValue","options","class"]),On]),e.v$.visit.ClinicianType.$invalid&&e.submitted||e.v$.visit.ClinicianType.$pending.$response?(Object(a["openBlock"])(),Object(a["createBlock"])("small",gn,"A clinician type is required.")):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("div",jn,[Object(a["createVNode"])("span",yn,[Object(a["createVNode"])(s,{id:"visitDate",modelValue:e.visit.VisitDate,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.visit.VisitDate=t}),showIcon:!0,class:{"p-invalid":e.submitted&&e.v$.visit.VisitDate.$invalid}},null,8,["modelValue","class"]),xn]),e.v$.visit.VisitDate.$invalid&&e.submitted||e.v$.visit.VisitDate.$pending.$response?(Object(a["openBlock"])(),Object(a["createBlock"])("small",Sn,"A visit date is required.")):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("div",wn,[Object(a["createVNode"])("span",Cn,[Object(a["createVNode"])(l,{showButtons:"",id:"minutesSpent",modelValue:e.visit.MinutesSpent,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.visit.MinutesSpent=t}),suffix:" minutes",min:1,class:{"p-invalid":e.submitted&&e.v$.visit.MinutesSpent.$invalid}},null,8,["modelValue","class"]),Vn]),e.v$.visit.MinutesSpent.$invalid&&e.submitted||e.v$.visit.MinutesSpent.$pending.$response?(Object(a["openBlock"])(),Object(a["createBlock"])("small",kn,"A visit length is required.")):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("div",Nn,[Object(a["createVNode"])("span",In,[Object(a["createVNode"])(l,{showButtons:"",id:"revenues",modelValue:e.visit.Revenue,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.visit.Revenue=t}),mode:"currency",currency:"USD",locale:"en-US",min:0,class:{"p-invalid":e.submitted&&e.v$.visit.Revenue.$invalid}},null,8,["modelValue","class"]),En]),e.v$.visit.Revenue.$invalid&&e.submitted||e.v$.visit.Revenue.$pending.$response?(Object(a["openBlock"])(),Object(a["createBlock"])("small",Dn,"A revenue value is required.")):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])(d,{type:"dashed"}),Object(a["createVNode"])("div",Rn,[Tn,Object(a["createVNode"])("div",Pn,[Object(a["createVNode"])(u,{type:"submit",label:"Submit",loading:e.loading,icon:"pi pi-check",class:""},null,8,["loading"])])])],32)}var Bn=function e(){Object(Zt["a"])(this,e)},Fn=Object(x["z"])({name:"ArtifactVisitCreationForm",setup:function(){return{store:Object(a["inject"])("store"),v$:Object(un["a"])(),options:{clinicianType:["ATC","CCCSLP","COTA","DC","DPT","EP","LPN","MPT","MSPT","NA","OT","Other","OTR","PhD","PT","PTA","RN","SLP","SPT","ST","RT"].map((function(e){return{display:e,value:e}}))}}},props:{externalEpisodeId:String},data:function(){return{visit:new Bn,loading:!1,submitted:!1}},methods:{submit:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.submitted=!0,t.prev=1,e.v$.visit.$invalid){t.next=12;break}return e.loading=!0,e.$Progress.start(),e.store.AddLog("Adding visit to episode with external id of ".concat(e.externalEpisodeId),e.visit),e.visit.ExternalEpisodeId=e.externalEpisodeId,t.next=9,e.store.Episode.AddVisit(e.visit);case 9:e.$emit("close"),e.$Progress.finish(),e.loading=!1;case 12:t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](1),Promise.reject(t.t0);case 17:case"end":return t.stop()}}),t,null,[[1,14]])})))()}},validations:function(){return{visit:{ClinicianType:{required:pn["a"]},MinutesSpent:{required:pn["a"]},Revenue:{required:pn["a"]},VisitDate:{required:pn["a"]}}}}});Fn.render=An;var Ln=Fn,_n={class:"p-field p-col-12 p-md-12"},Mn={class:"p-float-label"},$n=Object(a["createVNode"])("label",{for:"lastVisit"},"Last Visit",-1),Gn={key:0,class:"p-error"},Un={class:"p-field p-col-12 p-md-12"},qn={class:"p-float-label"},zn=Object(a["createVNode"])("label",{for:"interruptionDays"},"Interruption",-1),Hn={key:0,class:"p-error"},Wn={class:"p-field p-col-12 p-md-12"},Jn={class:"p-float-label"},Kn=Object(a["createVNode"])("label",{for:"comments"},"Comments",-1),Xn={class:"p-grid"},Qn=Object(a["createVNode"])("div",{class:"p-col-12 p-md-8"},null,-1),Yn={class:"p-col-12 p-md-4"};function Zn(e,t,r,n,i,o){var c=Object(a["resolveComponent"])("Calendar"),s=Object(a["resolveComponent"])("InputNumber"),l=Object(a["resolveComponent"])("Textarea"),d=Object(a["resolveComponent"])("Divider"),u=Object(a["resolveComponent"])("Button");return Object(a["openBlock"])(),Object(a["createBlock"])("form",{autocomplete:"off",onSubmit:t[4]||(t[4]=Object(a["withModifiers"])((function(t){return e.submit(!e.v$.$invalid)}),["prevent"])),class:"p-fluid"},[Object(a["createVNode"])("div",_n,[Object(a["createVNode"])("span",Mn,[Object(a["createVNode"])(c,{id:"lastVisit",modelValue:e.discharge.LastVisit,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.discharge.LastVisit=t}),showIcon:!0,class:{"p-invalid":e.submitted&&e.v$.discharge.LastVisit.$invalid}},null,8,["modelValue","class"]),$n]),e.v$.discharge.LastVisit.$invalid&&e.submitted||e.v$.discharge.LastVisit.$pending.$response?(Object(a["openBlock"])(),Object(a["createBlock"])("small",Gn,"A last visit value is required.")):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("div",Un,[Object(a["createVNode"])("span",qn,[Object(a["createVNode"])(s,{showButtons:"",id:"interruptionDays",modelValue:e.discharge.InterruptionDays,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.discharge.InterruptionDays=t}),suffix:" days",min:0,class:{"p-invalid":e.submitted&&e.v$.discharge.InterruptionDays.$invalid}},null,8,["modelValue","class"]),zn]),e.v$.discharge.InterruptionDays.$invalid&&e.submitted||e.v$.discharge.InterruptionDays.$pending.$response?(Object(a["openBlock"])(),Object(a["createBlock"])("small",Hn,"An interruption days value is requred.")):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("div",Wn,[Object(a["createVNode"])("span",Jn,[Object(a["createVNode"])(l,{autoResize:!0,modelValue:e.discharge.ClinicianComments,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.discharge.ClinicianComments=t}),rows:"5"},null,8,["modelValue"]),Kn])]),Object(a["createVNode"])(d,{type:"dashed"}),Object(a["createVNode"])("div",Xn,[Qn,Object(a["createVNode"])("div",Yn,[Object(a["createVNode"])(u,{type:"submit",label:"Submit",loading:e.loading,icon:"pi pi-check",class:""},null,8,["loading"])])])],32)}var ea=function e(){Object(Zt["a"])(this,e),this.ClinicianComments=""},ta=Object(x["z"])({name:"EpisodeDischargeForm",setup:function(){return{store:Object(a["inject"])("store"),v$:Object(un["a"])()}},props:{externalEpisodeId:String},data:function(){return{discharge:new ea,submitted:!1,loading:!1}},methods:{submit:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.submitted=!0,t.prev=1,e.v$.discharge.$invalid){t.next=12;break}return e.store.AddLog("Discharging episode",e.episode),e.loading=!0,e.$Progress.start(),e.discharge.ExternalEpisodeId=e.externalEpisodeId,t.next=9,e.store.Episode.Discharge(e.discharge);case 9:e.loading=!1,e.$emit("close"),e.$Progress.finish();case 12:t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](1),Promise.reject(t.t0);case 17:case"end":return t.stop()}}),t,null,[[1,14]])})))()}},validations:function(){return{discharge:{InterruptionDays:{required:pn["a"]},LastVisit:{required:pn["a"]}}}}});ta.render=Zn;var ra=ta,na={class:"p-col-12 p-lg-12"},aa={class:"p-field p-col-12 p-md-12"},ia={class:"table-header p-d-flex p-flex-column p-flex-md-row p-jc-md-between"},oa=Object(a["createVNode"])("h3",{class:"p-mb-2 p-m-md-0 p-as-md-center"},"Select an Episode",-1),ca={class:"p-float-label"},sa=Object(a["createVNode"])("label",{for:"type"},"Episode Type",-1),la=Object(a["createTextVNode"])("Please select an episode type from the dropdown above"),da={key:0,class:"p-error ta-c",style:{"margin-bottom":"0","text-align":"center"}},ua={class:"p-grid"},pa=Object(a["createVNode"])("div",{class:"p-col-12 p-md-10"},null,-1),ba={class:"p-col-12 p-md-2"};function ha(e,t,r,n,i,o){var c=Object(a["resolveComponent"])("Dropdown"),s=Object(a["resolveComponent"])("Column"),l=Object(a["resolveComponent"])("DataTable"),d=Object(a["resolveComponent"])("Fieldset"),u=Object(a["resolveComponent"])("Divider"),p=Object(a["resolveComponent"])("Button");return Object(a["openBlock"])(),Object(a["createBlock"])("form",{autocomplete:"off",onSubmit:t[3]||(t[3]=Object(a["withModifiers"])((function(){return e.submit&&e.submit.apply(e,arguments)}),["prevent"])),class:"p-fluid"},[Object(a["createVNode"])("div",na,[Object(a["createVNode"])(d,{legend:"External ID"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])("div",aa,[Object(a["createVNode"])(l,{autoLayout:!0,value:e.episodeOptions,selection:e.selectedEpisode,"onUpdate:selection":t[2]||(t[2]=function(t){return e.selectedEpisode=t}),dataKey:"id",responsiveLayout:"scroll"},Object(a["createSlots"])({header:Object(a["withCtx"])((function(){return[Object(a["createVNode"])("div",ia,[oa,Object(a["createVNode"])("span",ca,[Object(a["createVNode"])(c,{onChange:e.loadEpisodes,filter:!0,id:"type",modelValue:e.selectedType,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.selectedType=t}),options:e.types,optionLabel:"Display",optionValue:"Value"},null,8,["onChange","modelValue","options"]),sa])])]})),default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(s,{selectionMode:"single",headerStyle:"width: 3em"}),Object(a["createVNode"])(s,{header:"Diagnosis"},{body:Object(a["withCtx"])((function(e){return[Object(a["createVNode"])("span",null,Object(a["toDisplayString"])(e.data.diagnosis.map((function(e){return e.condition.display})).join(", ")),1)]})),_:1}),Object(a["createVNode"])(s,{header:"Type"},{body:Object(a["withCtx"])((function(e){return[Object(a["createVNode"])("span",null,Object(a["toDisplayString"])(e.data.type.map((function(e){return e.text})).join(", ")),1)]})),_:1}),Object(a["createVNode"])(s,{field:"status",header:"Status"}),Object(a["createVNode"])(s,{field:"period.start",header:"Start"}),Object(a["createVNode"])(s,{field:"period.end",header:"End"})]})),_:2},[e.selectedType?e.selectedType&&0===e.episodeOptions.length?{name:"empty",fn:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])("No episodes found")]}))}:void 0:{name:"empty",fn:Object(a["withCtx"])((function(){return[la]}))}]),1032,["value","selection"])]),!e.selectedEpisode&&e.submitted?(Object(a["openBlock"])(),Object(a["createBlock"])("p",da,"An episode must be selected")):Object(a["createCommentVNode"])("",!0)]})),_:1})]),Object(a["createVNode"])(u,{type:"dashed"}),Object(a["createVNode"])("div",ua,[pa,Object(a["createVNode"])("div",ba,[Object(a["createVNode"])(p,{type:"submit",label:"Submit",loading:e.loading,icon:"pi pi-check",class:""},null,8,["loading"])])])],32)}var ma=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(Zt["a"])(this,e),this.Value=null,this.Display=null,this.Value=t,this.Display=r},fa=Object(x["z"])({name:"ClaimEpisodeForm",setup:function(){var e,t,r=Object(a["inject"])("store"),n=null===(e=r.Fhir.State.ValueSet.EpisodeOfCareType)||void 0===e||null===(t=e.expansion)||void 0===t?void 0:t.contains,i=[];return n&&n.length>0&&(i=Object(Xt["a"])(n).sort((function(e,t){return e.display.localeCompare(t.display)})).map((function(e){return new ma("".concat(e.system,"|").concat(e.code),"".concat(e.display," (").concat(e.code,")"))}))),{store:r,types:i}},props:{episodeId:Number},data:function(){return{loading:!1,submitted:!1,selectedType:null,selectedEpisode:null,episodeOptions:[]}},methods:{loadEpisodes:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.submitted=!1,e.selectedEpisode=null,t.next=5,e.store.Fhir.EpisodeSearch(e.selectedType);case 5:r=t.sent,e.episodeOptions=r.entry.map((function(e){return e.resource})).filter((function(e){return"operationoutcome"!==e.resourceType.toLowerCase()})),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),Promise.reject(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},submit:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.submitted=!0;try{e.selectedEpisode&&(e.store.AddLog("Claiming episode id of ".concat(e.episodeId," with the value of ").concat(e.selectedEpisode.id)),e.loading=!0,e.$Progress.start(),e.store.Episode.Claim(e.episodeId,e.selectedEpisode.id),e.loading=!1,e.$emit("close"),e.$Progress.finish())}catch(r){Promise.reject(r)}case 2:case"end":return t.stop()}}),t)})))()}}});r("2af8");fa.render=ha;var va=fa,Oa=Object(x["z"])({name:"App",components:{SurveyLaunch:yr,EpisodeCreationForm:mn,ArtifactVisitCreationForm:Ln,EpisodeDischargeForm:ra,ClaimEpisodeForm:va,AppSplash:k,AppTopBar:Ot,AppDash:lt,AppSidebar:Yt},setup:function(){var e,t=Object(x["K"])("store"),r=Object(x["K"])("fhirclient"),n=Object(S["k"])(new tr(null===r||void 0===r||null===(e=r.user)||void 0===e?void 0:e.id));return{fhirClient:r,store:t,layout:n}},data:function(){return{selectedId:null,outboundPatient:null,showClaimEpisodeForm:!1,showSurvey:!1,showDischargeForm:!1,showVisitForm:!1,showEpisodeForm:!1}},created:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.$Progress.start(),Window.$toast=e.$toast,Window.$progress=e.$Progress,r=performance.now(),t.next=7,e.store.InitAsync(e.fhirClient);case 7:n=performance.now(),e.outboundPatient=e.store.GetContextValue("FotoPatient"),e.removeLoaderAfterElapsed(n-r),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),Promise.reject(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()},provide:function(){return{store:this.store}},computed:{speedDialItems:function(){var e=this,t=[{label:"static"===this.layout.mode?"Hide Sidebar":"Show Sidebar",icon:"static"===this.layout.mode?"pi pi-align-justify":"pi pi-align-right",command:function(){e.store.AddLog("Toggling layout mode to ".concat("static"===e.layout.colorMode?"overlay":"static")),e.layout.toggleMode()}},{label:"light"===this.layout.colorMode?"Dark Mode":"Light Mode",icon:"light"===this.layout.colorMode?"pi pi-moon":"pi pi-sun",command:function(){e.layout.loading=!0,e.store.AddLog("Toggling color mode to ".concat("light"===e.layout.colorMode?"dark":"light")),setTimeout((function(){return e.layout.toggleColorMode()}),500),setTimeout((function(){e.layout.loading=!1}),2500)}},{label:"Refresh Data",icon:"pi pi-refresh",command:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.layout.loading=!0,e.store.AddLog("Refreshing data"),r=performance.now(),t.next=5,e.store.Refresh(e.fhirClient);case 5:e.store=t.sent,n=performance.now(),e.removeLoaderAfterElapsed(n-r);case 8:case"end":return t.stop()}}),t)})));function r(){return t.apply(this,arguments)}return r}()}];return"Practitioner"===this.store.Fhir.State.Context.LaunchedByResource&&t.unshift({label:"Create Episode",icon:"pi pi-plus-circle",command:function(){e.showEpisodeForm=!0,e.store.AddLog("Displaying episode creation form.")}}),t}},methods:{removeLoaderAfterElapsed:function(e){var t=this;e<2500?setTimeout((function(){t.$Progress.finish(),t.layout.loading=!1}),2500-e):(this.$Progress.finish(),this.layout.loading=!1),setTimeout((function(){t.layout.loading=!1}),2500)},toggleDischargeView:function(){this.layout.toggleDischargeView()},toggleCardEpisodeDisplay:function(){this.layout.onCardToggle()},displayVisitModal:function(e){this.store.AddLog("Displaying visit modal for episode with external id ".concat(e)),this.selectedId=e,this.showVisitForm=!0},displayEpisodeClaimModal:function(e){this.store.AddLog("Displaying claim modal for episode with id ".concat(e)),this.selectedId=e,this.showClaimEpisodeForm=!0},displayDischargeModal:function(e){this.store.AddLog("Displaying discharge modal for episode with external id ".concat(e)),this.selectedId=e,this.showDischargeForm=!0},displaySurveyModal:function(e){this.store.AddLog("Displaying survey modal for episode with id ".concat(e.EpisodeId)),this.selectedId=e.EpisodeId,this.showSurvey=!0},isSidebarVisible:function(){return!(window.innerWidth>1024)||("static"===this.layout.mode?!this.layout.staticMenuInactive:"overlay"!==this.layout.mode||this.layout.overlayMenuActive)},containerClass:function(){return["layout-wrapper",{"layout-overlay":"overlay"===this.layout.mode,"layout-static":"static"===this.layout.mode,"layout-static-sidebar-inactive":this.layout.staticMenuInactive&&"static"===this.layout.mode,"layout-overlay-sidebar-active":this.layout.overlayMenuActive&&"overlay"===this.layout.mode,"layout-mobile-sidebar-active":this.layout.mobileMenuActive}]}}});Oa.render=y;var ga=Oa,ja=r("b85c"),ya=function(){function e(){Object(Zt["a"])(this,e),this.internalID=null,this.firstName="",this.lastName="",this.middleIntial="",this.dateOfBirth=null,this.email="",this.gender="",this.language="",this.externalID="",this.externalSiteID="",this.alias=""}return Object(er["a"])(e,[{key:"Alias",get:function(){return this.alias},set:function(e){"string"!==typeof e?e.value&&(this.alias=e.value):e&&(this.alias=e)}},{key:"InternalID",get:function(){return this.internalID},set:function(e){this.internalID=e}},{key:"ExternalSiteID",get:function(){return this.externalSiteID},set:function(e){"string"!==typeof e?e&&e.reference&&(this.externalSiteID=e.reference.toLowerCase().replace("organization/","")):e&&(this.externalSiteID=e)}},{key:"ExternalID",get:function(){return this.externalID},set:function(e){"string"!==typeof e?e&&e.value&&(this.externalID=e.value):e&&(this.externalID=e)}},{key:"Language",get:function(){return this.language},set:function(e){var t;"string"!==typeof e?e&&e.language.coding&&(this.language=null!==(t=e.language.coding[0].code)&&void 0!==t?t:""):e&&(this.language=e.substring(0,2))}},{key:"Gender",get:function(){return this.gender},set:function(e){e.length>0&&(this.gender=e[0])}},{key:"Email",get:function(){return this.email},set:function(e){if(e){var t="";"string"!==typeof e?e.value&&(t=e.value):t=e,t.includes("@")&&t.includes(".")&&(this.email=t)}}},{key:"DateOfBirth",get:function(){var e,t;return null!==(e=null===(t=this.dateOfBirth)||void 0===t?void 0:t.toDateString())&&void 0!==e?e:""},set:function(e){this.dateOfBirth=new Date(e)}},{key:"DateOfBirthStr",get:function(){var e;return null!==(e=this.dateOfBirth)&&void 0!==e?e:"/Date(".concat(this.dateOfBirth.getTime(),"-0400)/")}},{key:"Name",get:function(){return this.middleIntial?"".concat(this.firstName," ").concat(this.middleIntial," ").concat(this.lastName):"".concat(this.firstName," ").concat(this.lastName)},set:function(e){if("string"!==typeof e){var t;if(e.family&&(this.lastName=e.family),e.given)(null===(t=e.given)||void 0===t?void 0:t.length)>0&&(this.firstName=e.given[0]),e.given.length>1&&(this.middleIntial=e.given[1][0])}else{var r=e.split(" ");r.length>1&&(this.firstName=r[0],r.length>2?(this.middleIntial=r[1][0],this.lastName=r[2]):this.lastName=r[1])}}},{key:"FirstName",get:function(){return this.firstName},set:function(e){this.firstName=e}},{key:"LastName",get:function(){return this.lastName},set:function(e){this.lastName=e}},{key:"MiddleIntitial",set:function(e){e&&(this.middleIntial=e[0])}},{key:"MiddleInitial",get:function(){return this.middleIntial}},{key:"ToJSON",value:function(){return JSON.stringify([{FirstName:this.FirstName,LastName:this.LastName,Alias:this.Alias,DateOfBirth:this.dateOfBirth,Email:this.Email,ExternalId:this.ExternalID,ExternalSiteId:this.ExternalSiteID,Gender:this.Gender,Language:this.Language,MiddleInitial:this.MiddleInitial}])}}],[{key:"FromResource",value:function(t,r){var n=new e;if(t.id&&(n.ExternalID=t.id),t.communication?n.Language=t.communication[0]:n.Language="en",t.gender&&(n.Gender=t.gender),t.name&&(n.Name=t.name.filter((function(e){return"official"==e.use}))[0]),!t.birthDate||""===t.birthDate)throw new Error("Unable to find patient birthdate. Please provide a birthdate for this patient.");if(n.DateOfBirth=t.birthDate,t.telecom&&(n.Email=t.telecom.filter((function(e){return"email"==e.system}))[0]),t.managingOrganization&&(n.ExternalSiteID=t.managingOrganization),r&&(n.ExternalSiteID=r),t.identifier&&t.identifier.length>0){var a=t.identifier.filter((function(e){var t,r;return"MYCHARTLOGIN"==(null===(t=e.type)||void 0===t||null===(r=t.text)||void 0===r?void 0:r.toUpperCase())}));a&&a.length>0&&(n.Alias=a[0])}return n}}]),e}(),xa=(r("466d"),function(){function e(){Object(Zt["a"])(this,e)}return Object(er["a"])(e,null,[{key:"Success",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8e3;Window.$toast.add({severity:"success",summary:"Success",detail:e,life:t})}},{key:"Warning",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8e3;Window.$toast.add({severity:"warn",summary:"Warning",detail:e,life:t})}},{key:"Error",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8e3;Window.$toast.add({severity:"error",summary:"Error",detail:e,life:t})}}]),e}()),Sa=function(){function e(t){Object(Zt["a"])(this,e),this._cacheKey="nh-foto-sof-"+t}return Object(er["a"])(e,[{key:"Fetch",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,i,o,c,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=!(s.length>1&&void 0!==s[1])||s[1],n=s.length>2&&void 0!==s[2]?s[2]:null,e.prev=2,!r){e.next=9;break}return e.next=6,this.SearchCache(t.url);case 6:if(a=e.sent,!a){e.next=9;break}return e.abrupt("return",a);case 9:return e.next=11,fetch(t);case 11:if(i=e.sent,!i.ok){e.next=25;break}return o=i.clone(),e.next=16,i.json();case 16:if(c=e.sent,c.successful){e.next=19;break}throw new Error(c.errorMessage);case 19:return n&&xa.Success(n),e.next=22,this.PutCache(t.url,o);case 22:return e.abrupt("return",c.data);case 25:return e.t0=Error,e.next=28,i.text();case 28:throw e.t1=e.sent,new e.t0(e.t1);case 30:e.next=36;break;case 32:e.prev=32,e.t2=e["catch"](2),e.t2.request=t,Promise.reject(e.t2);case 36:case"end":return e.stop()}}),e,this,[[2,32]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"PutCache",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,caches.open(this._cacheKey);case 2:return n=e.sent,e.next=5,n.put(t,r);case 5:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"SearchCache",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,caches.open(this._cacheKey);case 2:return r=e.sent,e.next=5,r.match(t);case 5:if(n=e.sent,!n||!n.ok){e.next=12;break}return e.next=9,n.json();case 9:if(a=e.sent,!a.successful){e.next=12;break}return e.abrupt("return",a.data);case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),wa=function(){function e(t){Object(Zt["a"])(this,e),this._apiService=new Sa("patient-"+t)}return Object(er["a"])(e,[{key:"Create",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._apiService.Fetch(new Request("/api/Foto/patient2/json",{method:"POST",headers:{"Content-Type":"application/json"},body:t.ToJSON()}),!1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),Ca=(r("c740"),function e(){Object(Zt["a"])(this,e)}),Va=function(){function e(t){Object(Zt["a"])(this,e),this._apiService=new Sa("artifact-"+t)}return Object(er["a"])(e,[{key:"GetReport",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._apiService.Fetch(new Request("/api/Foto/report/json/".concat(t.ReportId,"/").concat(t.ReportType),{method:"GET",headers:{"Content-Type":"application/json"}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"GetArtifacts",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]&&a[1],e.next=3,this._apiService.Fetch(new Request("/api/Foto/artifact2/json/episode/".concat(t),{method:"GET",headers:{"Content-Type":"application/json"}}),r);case 3:return n=e.sent,e.abrupt("return",n.map((function(e){return Object.assign(new Ca,e)})).sort((function(e,t){return t.SurveyDateTimeCompleted.localeCompare(e.SurveyDateTimeCompleted)})));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"SetVisit",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._apiService.Fetch(new Request("/api/Foto/episode/ArtifactVisit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ExternalEpisodeId:t.ExternalEpisodeId,ReportId:t.ReportId,VisitNumber:r})}),!1);case 2:return n=e.sent,e.next=5,this.GetArtifacts(t.ExternalEpisodeId,!0);case 5:if(a=e.sent,i=a.findIndex((function(e){return e.ReportId===t.ReportId})),!(i>=0)){e.next=12;break}return t.Visit=r,a[i].Visit=r,e.next=12,this._apiService.PutCache("/api/Foto/artifact2/json/episode/".concat(t.ExternalEpisodeId),new Response(JSON.stringify(a)));case 12:return xa.Success("Visit number updated successfully"),e.abrupt("return",n);case 14:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"Email",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._apiService.Fetch(new Request("/api/Foto/Survey/Email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),!1,"Email sent successfully");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),ka=function(){function e(t){Object(Zt["a"])(this,e),this.ArtifactState=Object(a["reactive"])({Artifacts:[]}),this.State=Object(a["readonly"])(this.ArtifactState),this._externalPatientId=t,this._artifactService=new Va(this._externalPatientId)}return Object(er["a"])(e,[{key:"ForEpisode",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._artifactService.GetArtifacts(t);case 2:return this.ArtifactState.Artifacts=e.sent,e.abrupt("return",this.State.Artifacts);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"SetVisit",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.ArtifactState.Artifacts.filter((function(e){return e.ReportId===t}))[0],e.next=3,this._artifactService.SetVisit(n,r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"GetReport",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=this.ArtifactState.Artifacts.filter((function(e){return e.ReportId===t}))[0],e.next=3,this._artifactService.GetReport(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"EmailSurveyInformation",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._artifactService.Email(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),Na=function(){function e(){Object(Zt["a"])(this,e)}return Object(er["a"])(e,[{key:"Name",get:function(){return"".concat(this.FirstName," ").concat(this.LastName)}}]),e}(),Ia=function(){function e(t){Object(Zt["a"])(this,e),this._apiService=new Sa("code-"+t)}return Object(er["a"])(e,[{key:"GetCodes",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._apiService.Fetch(new Request("/api/Foto/episode/".concat(t),{method:"GET",headers:{"Content-Type":"application/json"}}));case 2:return r=e.sent,e.abrupt("return",r.map((function(e){return new ma(e.Key,e.Value)})));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"GetClinics",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._apiService.Fetch(new Request("/api/Foto/clinic/json/",{method:"GET",headers:{"Content-Type":"application/json"}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"GetClinicians",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._apiService.Fetch(new Request("/api/Foto/clinician/json/",{method:"GET",headers:{"Content-Type":"application/json"}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),Ea=function(){function e(t){Object(Zt["a"])(this,e),this._codeState=Object(a["reactive"])({PrimaryMeasure:[],SecondaryMeasure:[],CareType:[],PayerSource:[],BodyPart:[],Impairment:[],SurgeryType:[],Clinic:[],Clinician:[]}),this.State=Object(a["readonly"])(this._codeState),this._locationId=t,this._codeService=new Ia(this._locationId)}return Object(er["a"])(e,[{key:"SetCareTypes",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._codeService.GetCodes("GetCareTypeList/");case 2:return this._codeState.CareType=e.sent,e.abrupt("return",this._codeState.CareType);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"SetPayerSource",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._codeService.GetCodes("GetPayerSourceList/");case 2:return this._codeState.PayerSource=e.sent,e.abrupt("return",this._codeState.PayerSource);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"SetBodyParts",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._codeService.GetCodes("GetBodyPartList/".concat(t));case 2:return this._codeState.BodyPart=e.sent,e.abrupt("return",this._codeState.BodyPart);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"SetImpairments",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:null,n="GetImpairmentList/".concat(t),null!==r&&(n+="/".concat(r)),e.prev=3,e.next=6,this._codeService.GetCodes(n);case 6:this._codeState.Impairment=e.sent,e.next=14;break;case 9:return e.prev=9,e.t0=e["catch"](3),e.next=13,this._codeService.GetCodes("GetImpairmentList/".concat(t));case 13:this._codeState.Impairment=e.sent;case 14:return e.abrupt("return",this._codeState.Impairment);case 15:case"end":return e.stop()}}),e,this,[[3,9]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"SetSurgeryTypes",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._codeService.GetCodes("GetSurgeryTypeList/".concat(t,"/").concat(r));case 2:return this._codeState.SurgeryType=e.sent,e.abrupt("return",this._codeState.SurgeryType);case 4:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"SetClinics",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._codeService.GetClinics();case 2:return this._codeState.Clinic=e.sent,e.abrupt("return",this._codeState.Clinic);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"SetClinicians",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._codeService.GetClinicians();case 2:return this._codeState.Clinician=e.sent.map((function(e){return Object.assign(new Na,e)})),e.abrupt("return",this._codeState.Clinician);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"SetPrimaryMeasure",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,r,n,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._codeService.GetCodes("GetPrimaryMeasureList/".concat(t,"/").concat(r,"/").concat(n,"/").concat(a));case 2:return this._codeState.PrimaryMeasure=e.sent,e.abrupt("return",this._codeState.PrimaryMeasure);case 4:case"end":return e.stop()}}),e,this)})));function t(t,r,n,a){return e.apply(this,arguments)}return t}()},{key:"SetSecondaryMeasure",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,r,n,a,i){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._codeService.GetCodes("GetSecondaryMeasureList/".concat(t,"/").concat(r,"/").concat(n,"/").concat(a,"/").concat(i));case 2:return this._codeState.SecondaryMeasure=e.sent,e.abrupt("return",this._codeState.SecondaryMeasure);case 4:case"end":return e.stop()}}),e,this)})));function t(t,r,n,a,i){return e.apply(this,arguments)}return t}()}]),e}(),Da=function(){function e(t){Object(Zt["a"])(this,e),this._apiService=new Sa("episode-"+t)}return Object(er["a"])(e,[{key:"Claim",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._apiService.Fetch(new Request("/api/Foto/episode/json/claim2",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({episodeId:t.EpisodeId,externalEpisodeId:r})}),!1);case 2:if(n=e.sent,!n.Success){e.next=15;break}return e.next=6,this.GetAll(t.ExternalPatientId);case 6:return a=e.sent,i=a.findIndex((function(e){return e.EpisodeId===t.EpisodeId})),a[i].ExternalEpisodeId=r,t.ExternalEpisodeId=r,e.next=12,this._apiService.PutCache("/api/Foto/episode/json/GetEpisodeStatus/".concat(t.ExternalPatientId,"/Both"),new Response(JSON.stringify(a)));case 12:xa.Success("Episode claimed successfully."),e.next=16;break;case 15:xa.Error("Unable to claim episode: ".concat(n.Text));case 16:return e.abrupt("return",n);case 17:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"DeleteClaim",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._apiService.Fetch(new Request("/api/Foto/episode/".concat(r,"/").concat(t.EpisodeId),{method:"DELETE",headers:{"Content-Type":"application/json"}}),!1);case 2:if(n=e.sent,!n){e.next=12;break}return e.next=6,this.GetAll(t.ExternalPatientId);case 6:return a=e.sent,i=a.findIndex((function(e){return e.EpisodeId===t.EpisodeId})),a[i].ExternalEpisodeId=null,t.ExternalEpisodeId=null,e.next=12,this._apiService.PutCache("/api/Foto/episode/json/GetEpisodeStatus/".concat(t.ExternalPatientId,"/Both"),new Response(JSON.stringify(a)));case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"GetAll",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._apiService.Fetch(new Request("/api/Foto/episode/json/GetEpisodeStatus/".concat(t,"/Both"),{method:"GET",headers:{"Content-Type":"application/json"}}));case 2:return r=e.sent,r.forEach((function(e){e.ExternalPatientId=t})),e.abrupt("return",r.map((function(e){return Object.assign(new bn["a"],e)})));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"GetSurvey",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=new gr,e.next=3,this._apiService.Fetch(new Request("/api/Foto/episode/SurveyURL/".concat(t),{method:"GET",headers:{"Content-Type":"application/json"}}),!1);case 3:return r.Url=e.sent,e.next=6,this._apiService.Fetch(new Request("/api/Foto/episode/SurveyLobbyCode/".concat(t),{method:"GET",headers:{"Content-Type":"application/json"}}),!1);case 6:return r.LobbyCode=e.sent,e.next=9,this._apiService.Fetch(new Request("/api/Foto/episode/SurveyQRcode/".concat(t),{method:"GET",headers:{"Content-Type":"application/json"}}),!1);case 9:return r.QrCode=e.sent,e.abrupt("return",""===r.Url||""===r.QrCode?null:r);case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"AddVisit",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._apiService.Fetch(new Request("/api/Foto/visit2/json",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),!1);case 2:return r=e.sent,r[0].Success?xa.Success("Visit added successfully."):xa.Error(r.Text),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"Discharge",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._apiService.Fetch(new Request("/api/Foto/discharge/json",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),!1);case 2:if(n=e.sent,0!==n.ResultCode){e.next=7;break}xa.Error(n.Text),e.next=20;break;case 7:if(1!==n.ResultCode){e.next=11;break}xa.Warning(n.Text),e.next=20;break;case 11:return e.next=13,this.GetAll(t.ExternalPatientId);case 13:return a=e.sent,i=a.findIndex((function(e){return e.EpisodeId===t.EpisodeId})),a[i].DischargeTime=new Date,t.DischargeTime=new Date,e.next=19,this._apiService.PutCache("/api/Foto/episode/json/GetEpisodeStatus/".concat(t.ExternalPatientId,"/Both"),new Response(JSON.stringify(a)));case 19:xa.Success("Episode discharged successfully.");case 20:return e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"Create",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._apiService.Fetch(new Request("/api/Foto/episode/json/Creation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t.Json)}),!1,"Episode created successfully!");case 2:if(r=e.sent,!r.ValidEpisode||!r.EpisodeCreationResponse.EpisodeId){e.next=14;break}return t.EpisodeId=r.EpisodeCreationResponse.EpisodeId,e.next=7,this.GetAll(t.ExternalPatientId);case 7:return n=e.sent,n.push(t),e.next=11,this._apiService.PutCache("/api/Foto/episode/json/GetEpisodeStatus/".concat(t.ExternalPatientId,"/Both"),new Response(JSON.stringify(n)));case 11:xa.Success("Episode created successfully."),e.next=15;break;case 14:xa.Error("Error creating episode: ".concat(r.InvalidEpisodeReasons.join(", ")));case 15:return e.abrupt("return",r);case 16:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),Ra=function(){function e(t){Object(Zt["a"])(this,e),this.EpisodeState=Object(a["reactive"])({Episodes:[]}),this.State=Object(a["readonly"])(this.EpisodeState),this._externalPatientId=t,this._episodeService=new Da(this._externalPatientId)}return Object(er["a"])(e,[{key:"FilterLocal",value:function(e){return this.EpisodeState.Episodes.filter((function(t){return e(t)}))}},{key:"Get",value:function(e){return this.EpisodeState.Episodes.filter((function(t){return t.EpisodeId==e}))[0]}},{key:"DeleteClaim",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.Get(t),e.next=3,this._episodeService.DeleteClaim(n,r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"Claim",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.Get(t),a=this.EpisodeState.Episodes.filter((function(e){return e.ExternalEpisodeId.startsWith(r)})),a.length>0&&(r+="_".concat(a.length)),e.next=5,this._episodeService.Claim(n,r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"ForPatient",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._episodeService.GetAll(t);case 2:return this.EpisodeState.Episodes=e.sent.map((function(e){return Object.assign(new bn["a"],e)})),e.abrupt("return",this.EpisodeState.Episodes);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"GetByExternalId",value:function(e){return this.EpisodeState.Episodes.filter((function(t){return t.ExternalEpisodeId==e}))[0]}},{key:"GetSurvey",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._episodeService.GetSurvey(t.toString());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"AddVisit",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._episodeService.AddVisit(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"Add",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=this.EpisodeState.Episodes.filter((function(e){return e.ExternalEpisodeId.startsWith(t.ExternalEpisodeId)})),r.length>0&&(t.ExternalEpisodeId+="_".concat(r.length)),e.next=4,this._episodeService.Create(t);case 4:return n=e.sent,n.ValidEpisode&&n.EpisodeCreationResponse.EpisodeId&&this.EpisodeState.Episodes.push(t),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"Discharge",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=this.GetByExternalId(t.ExternalEpisodeId),e.next=3,this._episodeService.Discharge(r,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),Ta=function e(){Object(Zt["a"])(this,e)},Pa=function(){function e(t){Object(Zt["a"])(this,e),this.FhirClient=t,this._cacheKey="nh-foto-sof-fhir-"}return Object(er["a"])(e,[{key:"Get",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r="".concat(this._cacheKey,"-").concat(t),e.next=3,this.SearchCache(r);case 3:if(n=e.sent,!n){e.next=6;break}return e.abrupt("return",n);case 6:return e.next=8,this.FhirClient.request(t);case 8:return a=e.sent,e.next=11,this.PutCache(r,new Response(JSON.stringify(a)));case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"ReadPatient",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="".concat(this._cacheKey,"-patient-").concat(this.FhirClient.patient.id),e.next=3,this.SearchCache(t);case 3:if(r=e.sent,!r){e.next=6;break}return e.abrupt("return",r);case 6:return e.next=8,this.FhirClient.patient.read();case 8:return n=e.sent,e.next=11,this.PutCache(t,new Response(JSON.stringify(n)));case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"ReadUser",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="".concat(this._cacheKey,"-").concat(this.FhirClient.user.resourceType.toLowerCase(),"-").concat(this.FhirClient.patient.id),e.next=3,this.SearchCache(t);case 3:if(r=e.sent,!r){e.next=6;break}return e.abrupt("return",r);case 6:return e.next=8,this.FhirClient.user.read();case 8:return n=e.sent,e.next=11,this.PutCache(t,new Response(JSON.stringify(n)));case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"GetState",value:function(e){return this.FhirClient.getState("tokenResponse.".concat(e))}},{key:"PutCache",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,caches.open(this._cacheKey);case 2:return n=e.sent,e.next=5,n.put(t,r);case 5:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"SearchCache",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,caches.open(this._cacheKey);case 2:return r=e.sent,e.next=5,r.match(t);case 5:if(n=e.sent,!n||!n.ok){e.next=11;break}return console.log("match",n),e.next=10,n.json();case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),Aa=function(){function e(){Object(Zt["a"])(this,e),this.FhirState=Object(a["reactive"])({Context:new Ta,ValueSet:{EpisodeOfCareType:[]}}),this.State=Object(a["readonly"])(this.FhirState)}return Object(er["a"])(e,[{key:"InitAsync",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.FhirService=new Pa(t),this.FhirState.Context.LaunchedByResource=t.user.resourceType,e.next=4,this.UpdateState();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"UpdateState",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.SetPractitioner(!0);case 2:return this.FhirState.Context.Practitioner=e.sent,e.next=5,this.SetPatient(!0);case 5:return this.FhirState.Context.Patient=e.sent,e.next=8,this.SetEncounter(this.FhirService.GetState("encounter"),!0);case 8:return this.FhirState.Context.Encounter=e.sent,e.next=11,this.SetEpisodeOfCare(this.State.Context.Encounter,!1);case 11:return this.FhirState.Context.EpisodeOfCare=e.sent,e.next=14,this.SetLocation(!0);case 14:return this.FhirState.Context.Location=e.sent,e.next=17,this.SetList("allergies");case 17:return this.FhirState.Context.Allergies=e.sent,e.next=20,this.SetList("problems");case 20:return this.FhirState.Context.Problems=e.sent,e.next=23,this.SetList("medications");case 23:return this.FhirState.Context.Medications=e.sent,e.next=26,this.SetList("immunizations");case 26:return this.FhirState.Context.Immunizations=e.sent,e.next=29,this.GetValueSet("EpisodeOfCare.type");case 29:this.FhirState.ValueSet.EpisodeOfCareType=e.sent;case 30:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"EpisodeSearch",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.FhirService.Get("EpisodeOfCare?patient=".concat(this.FhirState.Context.Patient.id,"&type=").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"GetValueSet",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.FhirService.Get("ValueSet/$expand?context=".concat(t,"&contextDirection=outgoing"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"SetList",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.FhirService.Get("List?patient=".concat(this.FhirState.Context.Patient.id,"&code=").concat(t));case 2:return r=e.sent,e.abrupt("return",r.entry.map((function(e){return e.resource})));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"SetPractitioner",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,r,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]&&n[0],e.next=3,this.FhirService.ReadUser();case 3:if(r=e.sent,r||!t){e.next=6;break}throw new Error("Practitioner not found in EMR");case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"SetPatient",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,r,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]&&n[0],e.next=3,this.FhirService.ReadPatient();case 3:if(r=e.sent,r||!t){e.next=6;break}throw new Error("Patient not found in EMR");case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"SetLocation",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,r,n,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]&&a[0],r=null,n=this.FhirService.GetState("loginDepartment"),!n){e.next=7;break}return e.next=6,this.FhirService.Get("Location/".concat(n));case 6:r=e.sent;case 7:if(r||!t){e.next=9;break}throw new Error("Location not found in EMR");case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"SetEncounter",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]&&a[1],e.next=3,this.FhirService.Get("Encounter/".concat(t));case 3:if(n=e.sent,n||!r){e.next=6;break}throw new Error("Encounter not found in EMR");case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"SetEpisodeOfCare",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,i,o,c,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=s.length>1&&void 0!==s[1]&&s[1],a=[],!(null!==t&&void 0!==t&&t.episodeOfCare&&(null===(r=t.episodeOfCare)||void 0===r?void 0:r.length)>0)){e.next=15;break}i=0;case 4:if(!(i<t.episodeOfCare.length)){e.next=15;break}if(c=null===(o=t.episodeOfCare[i])||void 0===o?void 0:o.reference,!c||""===c){e.next=12;break}return e.t0=a,e.next=10,this.FhirService.Get(c);case 10:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 12:i++,e.next=4;break;case 15:if(0!==a.length||!n){e.next=17;break}throw new Error("Episode of care not found in EMR");case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),Ba=function(){function e(){Object(Zt["a"])(this,e),this._context=Object(a["reactive"])({State:{},Log:[]}),this.Context=Object(a["readonly"])(this._context)}return Object(er["a"])(e,[{key:"InitAsync",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.Fhir=new Aa,e.next=3,this.Fhir.InitAsync(t);case 3:return r=ya.FromResource(this.Fhir.State.Context.Patient,""),n=new wa(r.ExternalID),e.next=7,n.Create(r);case 7:return this.Code=new Ea(r.ExternalSiteID),this.Artifact=new ka(r.ExternalID),this.Episode=new Ra(r.ExternalID),e.next=12,this.Episode.ForPatient(r.ExternalID);case 12:this._context.State={LaunchedBy:this.Fhir.State.Context.LaunchedByResource,Practitioner:this.Fhir.State.Context.Practitioner,Patient:this.Fhir.State.Context.Patient,Encounter:this.Fhir.State.Context.Encounter,Episode:this.Fhir.State.Context.EpisodeOfCare,Location:this.Fhir.State.Context.Location,FotoPatient:r};case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"Refresh",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(r){var n,a,i,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new e,n._context.Log=this._context.Log,t.next=4,caches.keys();case 4:a=t.sent,i=Object(ja["a"])(a),t.prev=6,i.s();case 8:if((o=i.n()).done){t.next=14;break}return c=o.value,t.next=12,caches.delete(c);case 12:t.next=8;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](6),i.e(t.t0);case 19:return t.prev=19,i.f(),t.finish(19);case 22:return t.next=24,n.InitAsync(r);case 24:return t.abrupt("return",n);case 25:case"end":return t.stop()}}),t,this,[[6,16,19,22]])})));function r(e){return t.apply(this,arguments)}return r}()},{key:"SetContextValue",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._context[e]=t,this.AddLog("Set value ".concat(e),t,r)}},{key:"GetContextValue",value:function(e){return this._context.State[e]}},{key:"AddLog",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._context.Log.push("".concat((new Date).toLocaleString()," - ").concat(e).concat(t?" - ".concat(r?JSON.stringify(t):t):""))}}]),e}(),Fa=r("9b4a"),La=r("45eb"),_a=r("7e84"),Ma=r("262e"),$a=r("2caf"),Ga=function(e){Object(Ma["a"])(r,e);var t=Object($a["a"])(r);function r(){return Object(Zt["a"])(this,r),t.apply(this,arguments)}return Object(er["a"])(r,[{key:"draw",value:function(){var e=this.chart,t=e.ctx,n=t.stroke;t.stroke=function(){t.save(),t.shadowColor=t.strokeStyle,t.shadowBlur=7,t.shadowOffsetX=0,t.shadowOffsetY=3,n.apply(this,arguments),t.restore()},Object(La["a"])(Object(_a["a"])(r.prototype),"draw",this).apply(this,arguments),t.stroke=n}}]),r}(Fa["b"]);Ga.id="shadowLine";var Ua=r("ecee"),qa=r("c074"),za=r("ad3d"),Ha=(r("bddf"),r("e1ae"),r("4121"),r("9319")),Wa=r("de53"),Ja=r("c8c8"),Ka=r("48d5"),Xa=r("438c"),Qa=r("bb57"),Ya=r("cb8b"),Za=r("9899"),ei=r("2052"),ti=r("4344"),ri=r("6f85"),ni=r("1f80"),ai=r("1453"),ii=r("5b2c"),oi=r("5bd2"),ci=r("32e0"),si=r("0100"),li=r("743f"),di=r("bfb8"),ui=r("2431"),pi=r("246e"),bi=r("f4ad"),hi=r("8398"),mi=r("3822"),fi=r("90eb"),vi=r("4147"),Oi=r("2db7"),gi=r("a034"),ji=r("c045"),yi=r("a469"),xi=r("216d"),Si=r("c231"),wi=r("ae1f"),Ci=r("4f4a"),Vi=r("427b"),ki=r("00ba"),Ni=r("22a4"),Ii=r("237b"),Ei=r("1e02"),Di=r("c35b"),Ri=r("4c62"),Ti=r("b3b6"),Pi=r("485c"),Ai=r("eeae"),Bi=r("c982"),Fi=r("20de"),Li=r("5db6"),_i=r("6b8c"),Mi=r("10b7"),$i=r.n(Mi);Fa["a"].register(Ga),Object(n["a"])(regeneratorRuntime.mark((function e(){var t,r,n,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Object(a["createApp"])(ga),Ua["c"].add(qa["n"],qa["k"],qa["d"],qa["m"],qa["f"],qa["g"],qa["i"],qa["j"],qa["q"],qa["p"],qa["b"],qa["c"],qa["a"],qa["o"],qa["l"],qa["e"],qa["h"]),t.use(Ha["a"],{ripple:!0,inputStyle:"outlined"}),t.use(Pi["a"]),t.use($i.a,{color:"#0388E5",failedColor:"red",thickness:"4px",location:"top",autoRevert:!0,inverse:!1,autoFinish:!1,transition:{speed:".1s",opacity:"0s",termination:800}}),t.component("font-awesome-icon",za["a"]),t.component("Accordion",Wa["a"]),t.component("AccordionTab",Ja["a"]),t.component("Avatar",Ka["a"]),t.component("Button",Qa["a"]),t.component("Calendar",Ya["a"]),t.component("Card",Za["a"]),t.component("Chart",ti["a"]),t.component("Checkbox",ei["a"]),t.component("Column",ri["a"]),t.component("ColumnGroup",ni["a"]),t.component("ContextMenu",ai["a"]),t.component("DataTable",ii["a"]),t.component("Dialog",oi["a"]),t.component("Divider",ci["a"]),t.component("Dropdown",si["a"]),t.component("Fieldset",li["a"]),t.component("Image",di["a"]),t.component("InlineMessage",ui["a"]),t.component("Inplace",pi["a"]),t.component("InputNumber",mi["a"]),t.component("InputSwitch",bi["a"]),t.component("InputText",hi["a"]),t.component("Menu",fi["a"]),t.component("MultiSelect",vi["a"]),t.component("OverlayPanel",Oi["a"]),t.component("Password",gi["a"]),t.component("ProgressBar",ji["a"]),t.component("ProgressSpinner",yi["a"]),t.component("Row",Si["a"]),t.component("ScrollPanel",wi["a"]),t.component("Splitter",Ii["a"]),t.component("SplitterPanel",Ei["a"]),t.component("Sidebar",Vi["a"]),t.component("Skeleton",Ci["a"]),t.component("SpeedDial",ki["a"]),t.component("SplitButton",Ni["a"]),t.component("TabMenu",Di["a"]),t.component("TabView",Ai["a"]),t.component("TabPanel",Bi["a"]),t.component("Tag",Fi["a"]),t.component("Textarea",Ri["a"]),t.component("Timeline",Li["a"]),t.component("Toast",Ti["a"]),t.directive("tooltip",_i["a"]),t.directive("ripple",xi["a"]),t.directive("badgedirective",Xa["a"]),r=new Ba,n=sessionStorage.SMART_KEY,i=localStorage.getItem("nh-foto-sof-launch-context-".concat(n)),r.SetContextValue("SessionId",JSON.parse(n),!1),r.SetContextValue("LaunchContext",i),e.next=59,o.a.oauth2.ready();case 59:c=e.sent,t.provide("store",r),t.provide("fhirclient",c),t.config.errorHandler=function(e,t,a){var i=new Error(e);console.error(i),Window.$progress.fail(),Window.$toast.add({severity:"error",summary:"Error",detail:i.message,life:5e3}),fetch(new Request("/api/Logging/Error/".concat(n),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r.Context)}))},window.addEventListener("unhandledrejection",(function(e){console.error(e),Window.$progress.fail(),Window.$toast.add({severity:"error",summary:"Error",detail:e.reason.message,life:5e3}),fetch(new Request("/api/Logging/Error/".concat(n),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r.Context)}))})),t.mount("#app");case 65:case"end":return e.stop()}}),e)})))()},"968d":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r("1da1"),a=r("d4ec"),i=(r("96cf"),r("ac1f"),r("5319"),r("1276"),r("18bf")),o=function e(){Object(a["a"])(this,e)};o.Mdm={Build:function(e,t,r,n,a,o){var c=new i,s=(new Date).toISOString().split(".")[0].replace(/[^\d]/gi,"");return c.createSegment("MSH"),c.set("MSH.2","^~\\&"),c.set("MSH.3","FOTO"),c.set("MSH.5","FOTO"),c.set("MSH.6","EPIC"),c.set("MSH.7",s),c.set("MSH.9.1","MDM"),c.set("MSH.9.2","T02"),c.set("MSH.10",s),c.set("MSH.11","D"),c.set("MSH.12","2.3"),c.createSegment("PID"),c.set("PID.3.1",e),c.set("PID.3.5","EPI"),c.set("PID.5.1",r),c.set("PID.5.2",t),c.createSegment("PV1"),c.set("PV1.1","1"),c.set("PV1.19",n),c.createSegment("TXA"),c.set("TXA.2","Questionnaire"),c.set("TXA.4",s),c.set("TXA.12",a),c.set("TXA.17","AU"),c.set("TXA.19","AV"),c.createSegment("OBX"),c.set("OBX.1","1"),c.set("OBX.2","ED"),c.set("OBX.3","PDF_FILE"),c.set("OBX.4","1"),c.set("OBX.5.3","PDF"),c.set("OBX.5.4","Base64"),c.set("OBX.5.5",o),c.build()},Send:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(t);case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}},b352:function(e,t,r){"use strict";var n=r("7a23"),a={class:"p-datatable p-component p-datatable-sm"},i={class:"p-datatable-wrapper"},o=Object(n["createVNode"])("div",{class:"p-datatable-header"},"Risk-Adjustment Criteria",-1),c={role:"table",class:"p-datatable-table"};function s(e,t,r,s,l,d){return Object(n["openBlock"])(),Object(n["createBlock"])("div",a,[Object(n["createVNode"])("div",i,[o,Object(n["createVNode"])("table",c,[Object(n["createVNode"])("tbody",{role:"rowgroup",class:"p-datatable-tbody",id:"rai-tbody-"+e.artifact.ReportId},null,8,["id"])])])])}r("159b"),r("99af");var l=r("5c40"),d=Object(l["z"])({name:"RiskAdjustmentCriteria",props:{artifact:Object},mounted:function(){var e=this.artifact,t=document.querySelector("#rai-tbody-".concat(e.ReportId)),r='<tr colspan="12">',n=1;e.RiskAdjustedItems.forEach((function(t){n%6===0?(r+='<td role="cell" colspan="6">'.concat(t.Attribute,": ").concat(t.Value,"</td>"),r+="</tr>",n!==e.RiskAdjustedItems.length&&(r+='<tr colspan="12" class="">')):(r+='<td role="cell" colspan="6">'.concat(t.Attribute,": ").concat(t.Value,"</td>"),n===e.RiskAdjustedItems.length&&n%2!==0&&(r+='<td role="cell" colspan="6"></td>')),n++})),t.innerHTML=r}});d.render=s;t["a"]=d},c26e:function(e,t,r){},c4e3:function(e,t,r){"use strict";(function(e){var n=r("1da1"),a=(r("96cf"),r("d3b7"),r("99af"),r("25f0"),r("caad"),r("4de4"),r("8a79"),r("b0c0"),r("5cc6"),r("9a8c"),r("a975"),r("735e"),r("c1ac"),r("d139"),r("3a7b"),r("d5d6"),r("82f8"),r("e91f"),r("60bd"),r("5f96"),r("3280"),r("3fcc"),r("ca91"),r("25a1"),r("cd26"),r("3c5d"),r("2954"),r("649e"),r("219c"),r("170b"),r("b39a"),r("72f7"),r("3ca3"),r("ddb0"),r("2b3d"),r("ac1f"),r("5319"),r("1276"),r("968d")),i=r("5c40"),o=r("de5b"),c=r("7a23"),s=r("0e26"),l=r("4036"),d=r("d064"),u=r("fea0"),p=r("5d7b"),b=r("b352");t["a"]=Object(i["z"])({name:"ArtifactDetail",components:{AdditionalItemTable:s["a"],ArtifactSummaryChart:l["a"],FunctionalStatusMeasureTable:u["a"],ArtifactSurveys:p["a"],RiskAdjustmentCriteria:b["a"]},setup:function(){var e=Object(c["inject"])("store"),t=e.GetContextValue("FotoPatient");return{store:e,patient:t}},props:{episode:d["a"]},data:function(){return{error:null,artifacts:[],inContextArtifact:null,artifactVisitValue:0,loadingDetails:!1,updatingVisitNumber:!1}},created:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$Progress.start(),e.loadingDetails=!0,t.prev=2,t.next=5,e.store.Artifact.ForEpisode(e.episode.ExternalEpisodeId);case 5:e.artifacts=t.sent,e.inContextArtifact=e.artifacts[0],e.store.SetContextValue("SelectedArtifact",e.inContextArtifact),t.next=15;break;case 10:t.prev=10,t.t0=t["catch"](2),e.$emit("Error",t.t0),e.error=t.t0,Promise.reject(t.t0);case 15:e.$Progress.finish(),e.loadingDetails=!1;case 17:case"end":return t.stop()}}),t,null,[[2,10]])})))()},computed:{panelBodyHeader:function(){var e="".concat(this.getformattedDate(this.inContextArtifact.SurveyDateTimeCompleted)," - ").concat(o["a"][this.inContextArtifact.ReportType].toString()," Summary - Completed");if([0,1].includes(this.inContextArtifact.ReportType)&&this.inContextArtifact.FunctionalAssessments.length>0){var t=this.inContextArtifact.FunctionalAssessments.filter((function(e){return"physical fs primary measure"===e.Descriptor.toLowerCase()}))[0];if(t){var r,n,a=null===(r=t.FunctionalScoreSummaries)||void 0===r?void 0:r.length;e+=" - ".concat(null===t||void 0===t||null===(n=t.FunctionalScoreSummaries[a-1])||void 0===n?void 0:n.FunctionalScore)}else e+=" - N/A"}return e},primaryAssessment:function(){return this.inContextArtifact.FunctionalAssessments.length>0?this.inContextArtifact.FunctionalAssessments.filter((function(e){return"physical fs primary measure"===e.Descriptor.toLowerCase()}))[0]:null},menuItems:function(){var e=this,t=[{label:"View",icon:"pi pi-eye",command:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.viewReport();case 2:case"end":return t.stop()}}),t)})));function r(){return t.apply(this,arguments)}return r}()},{label:"Download",icon:"pi pi-file-pdf",command:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.downloadReport();case 2:case"end":return t.stop()}}),t)})));function r(){return t.apply(this,arguments)}return r}()}];return"Practitioner"===this.store.Fhir.State.Context.LaunchedByResource&&t.unshift({label:"Upload to MyChart",icon:"pi pi-cloud-upload",command:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.uploadReport();case 2:case"end":return t.stop()}}),t)})));function r(){return t.apply(this,arguments)}return r}()}),t}},methods:{createPanelHeader:function(e){return"".concat(this.getformattedDate(e.SurveyDateTimeCompleted)," Functional ").concat(o["a"][e.ReportType].toString()," Summary")},artifactSelected:function(e){this.inContextArtifact=this.artifacts[e.index],this.store.SetContextValue("SelectedArtifact",this.inContextArtifact)},toggleArtifactVisitNumOp:function(e){this.$refs["artifactVisitNumOp-".concat(this.inContextArtifact.ReportId)].toggle(e)},launchSurvey:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.store.AddLog("Launching survey for episode ".concat(e.episode.EpisodeId)),t.next=4,e.store.Episode.GetSurvey(e.episode.EpisodeId);case 4:r=t.sent,window.open(r.Url),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),Promise.reject(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},updateVisitNumber:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,n=t.artifacts.filter((function(e){return e.ReportId===t.inContextArtifact.ReportId}))[0],n.Visit===t.artifactVisitValue){r.next=10;break}return t.store.AddLog("Updating visit for report ".concat(t.inContextArtifact.ReportId," with value ").concat(t.artifactVisitValue)),t.updatingVisitNumber=!0,t.$Progress.start(),r.next=8,t.store.Artifact.SetVisit(t.inContextArtifact.ReportId,t.artifactVisitValue);case 8:t.$Progress.finish(),t.updatingVisitNumber=!1;case 10:t.$refs["artifactVisitNumOp-".concat(t.inContextArtifact.ReportId)].toggle(e),r.next=16;break;case 13:r.prev=13,r.t0=r["catch"](0),Promise.reject(r.t0);case 16:case"end":return r.stop()}}),r,null,[[0,13]])})))()},uploadReport:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var n,i,c,s,l,d,u,p,b,h,m,f,v,O;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.store.AddLog("Uploading report to mychart"),t.$Progress.start(),r.next=5,t.store.Artifact.GetReport(t.inContextArtifact.ReportId);case 5:return l=r.sent,d=t.store.Fhir.State.Context.Patient,u=t.store.Fhir.State.Context.Encounter,p=null===(n=d.identifier.filter((function(e){return e.system.endsWith("114350.1.1")}))[0])||void 0===n?void 0:n.value,b=null===(i=d.name[0])||void 0===i?void 0:i.given[0],h=null===(c=d.name[0])||void 0===c?void 0:c.family,m=null===(s=u.identifier.filter((function(e){return e.system.endsWith("698084.8")}))[0])||void 0===s?void 0:s.value,f="".concat(t.inContextArtifact.ReportId,"_").concat(o["a"][t.inContextArtifact.ReportType].toLowerCase()),v=e.from(l).toString("base64"),O=a["a"].Mdm.Build(p,b,h,m,f,v),t.store.AddLog("HL7 message for report",O),r.next=18,a["a"].Mdm.Send(O);case 18:t.$Progress.finish(),r.next=24;break;case 21:r.prev=21,r.t0=r["catch"](0),Promise.reject(r.t0);case 24:case"end":return r.stop()}}),r,null,[[0,21]])})))()},downloadReport:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,n,a,i,c,s,l,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.store.AddLog("Downloading report ".concat(e.inContextArtifact.ReportId)),e.$Progress.start(),t.next=5,e.store.Artifact.GetReport(e.inContextArtifact.ReportId);case 5:r=t.sent,n=new Blob([new Uint8Array(r)],{type:"application/pdf"}),a=document.createElement("a"),i=o["a"][e.inContextArtifact.ReportType],c=e.store.GetContextValue("FotoPatient"),s=new Date(e.inContextArtifact.SurveyDateTimeCompleted),l=new Date(e.inContextArtifact.SurveyDateTimeStarted),d=1!==s.getFullYear()?"".concat(s.getMonth()+1).concat(s.getDate()).concat(s.getFullYear()):"".concat(l.getMonth()+1).concat(l.getDate()).concat(l.getFullYear()),a.href=URL.createObjectURL(n),a.download="".concat(c.Alias,"_").concat(i,"_").concat(d,".pdf"),a.click(),e.$Progress.finish(),t.next=22;break;case 19:t.prev=19,t.t0=t["catch"](0),Promise.reject(t.t0);case 22:case"end":return t.stop()}}),t,null,[[0,19]])})))()},viewReport:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.store.AddLog("Viewing report ".concat(e.inContextArtifact.ReportId)),e.$Progress.start(),t.next=5,e.store.Artifact.GetReport(e.inContextArtifact.ReportId);case 5:r=t.sent,n=new Blob([new Uint8Array(r)],{type:"application/pdf"}),a=window.open("about:blank"),a.location=URL.createObjectURL(n),a.focus(),e.$Progress.finish(),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),Promise.reject(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))()},toggle:function(e){var t=this.$refs["artifact_report_menu_".concat(this.inContextArtifact.ReportId)];t.toggle(e),e.stopPropagation()},getformattedDate:function(e){return new Date(e).toISOString().split("T")[0].replace(/-/g,"/")}}})}).call(this,r("b639").Buffer)},d064:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r("d4ec"),a=r("bee2"),i=(r("caad"),r("e488")),o=function(){function e(){Object(n["a"])(this,e),this.EpisodeId=null,this.BodyPartId=null,this.BodyPartText=null,this.ImpairmentId=null,this.ImpairmentText=null,this.CareTypeId=null,this.CareTypeText=null,this.SurgeryTypeId=null,this.SurgeryTypeText=null,this.PayerSourceId=null,this.PayerSourceText=null,this.PrimaryMeasureId=null,this.PrimaryMeasureText=null,this.SiteId=null,this.SiteText=null,this.TherapistId=null,this.TherapistName=null,this.SecondaryMeasureIds=new Array,this.SecondaryMeasureText=null,this.CreateDate=null,this.LatestIntakeTime=null,this.LatestStatusTime=null,this.DischargeTime=null,this.StatusCount=null,this.NPId=null,this.NPDescription=null,this.ExternalEpisodeId=null,this.ExternalPatientId=null}return Object(a["a"])(e,[{key:"DateHasValue",value:function(e){return![1,1969].includes(e.getFullYear())&&null!==e}},{key:"Json",get:function(){return{ExternalPatientId:this.ExternalPatientId,ExternalEpisodeId:this.ExternalEpisodeId,SiteId:this.SiteId?this.SiteId:-1,ClinicianId:this.TherapistId?this.TherapistId:-1,CareTypeId:this.CareTypeId?this.CareTypeId:-1,BodyPartId:this.BodyPartId?this.BodyPartId:-1,ImpairmentId:this.ImpairmentId?this.ImpairmentId:-1,SurgeryTypeId:this.SurgeryTypeId?this.SurgeryTypeId:-1,PayerSourceId:this.PayerSourceId?this.PayerSourceId:-1,PrimaryMeasureId:this.PrimaryMeasureId?this.PrimaryMeasureId:-1,SecondaryMeasureIds:this.SecondaryMeasureIds}}},{key:"Info",get:function(){var e=new Date,t=new Date(this.CreateDate),r=new Date(this.LatestIntakeTime),n=new Date(this.LatestStatusTime),a=new Date(this.DischargeTime);if(this.DateHasValue(a)||this.NPId&&this.NPId>0)return i["a"].Discharged;if(!this.DateHasValue(r)){var o=e.getTime()-t.getTime(),c=o/864e5;if(c>=7)return i["a"].IntakeOverdue}if(this.DateHasValue(r)){var s=(new Date).getTime()-r.getTime();this.DateHasValue(n)&&(s=(new Date).getTime()-n.getTime());var l=s/864e5;if(l>=14)return i["a"].StatusOverdue}if(this.DateHasValue(n)){var d=(new Date).getTime()-n.getTime(),u=d/864e5;if(u>=30&&u<=44)return i["a"].Close;if(u>=45)return i["a"].Inactive}return i["a"].InProgress}}]),e}()},de5b:function(e,t,r){"use strict";var n;r.d(t,"a",(function(){return n})),function(e){e[e["Intake"]=0]="Intake",e[e["Status"]=1]="Status",e[e["Discharge"]=2]="Discharge",e[e["NonParticipation"]=3]="NonParticipation",e[e["ADLIntake"]=4]="ADLIntake",e[e["ADLStatus"]=5]="ADLStatus",e[e["MDT"]=6]="MDT",e[e["MSIntake"]=7]="MSIntake",e[e["MSStatus"]=8]="MSStatus"}(n||(n={}))},e488:function(e,t,r){"use strict";var n;(function(e){e[e["InProgress"]=0]="InProgress",e[e["IntakeOverdue"]=1]="IntakeOverdue",e[e["StatusOverdue"]=2]="StatusOverdue",e[e["Close"]=3]="Close",e[e["Inactive"]=4]="Inactive",e[e["Discharged"]=5]="Discharged"})(n||(n={})),t["a"]=n},fea0:function(e,t,r){"use strict";var n=r("7a23"),a={class:"p-datatable p-component p-datatable-sm"},i={class:"p-datatable-thead",role:"rowgroup"},o={role:"row"},c=Object(n["createVNode"])("th",{role:"cell",colspan:"2"},"Functional Status Measures",-1),s=Object(n["createVNode"])("th",{role:"cell",colspan:"6"},"Interpretation of FS Scores/Stages Value",-1),l={class:"p-datatable-tbody",role:"rowgroup"},d={class:"",tabindex:"0",role:"row"},u=Object(n["createVNode"])("td",{role:"cell",colspan:"2"},"Patient's Physical FS Primary Measure",-1),p={key:0,role:"cell",colspan:"6"},b={key:1,role:"cell",colspan:"6"},h={key:2,role:"cell",colspan:"6"},m={class:"",tabindex:"0",role:"row"},f=Object(n["createVNode"])("td",{role:"cell",colspan:"2"},"Risk Adjusted Statistical FOTO",-1),v={role:"cell"},O={role:"cell",colspan:"6"};function g(e,t,r,g,j,y){return Object(n["openBlock"])(),Object(n["createBlock"])("table",a,[Object(n["createVNode"])("thead",i,[Object(n["createVNode"])("tr",o,[c,(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.primaryAssessment.FunctionalScoreSummaries,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])("th",{role:"cell",key:e.Label},Object(n["toDisplayString"])(e.Label)+" Score ",1)})),128)),s])]),Object(n["createVNode"])("tbody",l,[Object(n["createVNode"])("tr",d,[u,(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.primaryAssessment.FunctionalScoreSummaries,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])("td",{role:"cell",key:e.Label},Object(n["toDisplayString"])(e.FunctionalScore),1)})),128)),e.primaryAssessment.StagingInfo.CurrentStage||0===e.primaryAssessment.StagingInfo.IntakeStage.Stage?e.primaryAssessment.StagingInfo.CurrentStage?(Object(n["openBlock"])(),Object(n["createBlock"])("td",b," Patient's Intake FS Score was "+Object(n["toDisplayString"])(e.primaryAssessment.StagingInfo.IntakeStage.Measure)+" initially placing the patient in Stage "+Object(n["toDisplayString"])(e.primaryAssessment.StagingInfo.IntakeStage.Stage)+". Patient's FS score now is "+Object(n["toDisplayString"])(e.primaryAssessment.StagingInfo.CurrentStage.Measure)+" out of 100 ("+Object(n["toDisplayString"])(e.primaryAssessment.StagingInfo.CurrentStage.Measure-e.primaryAssessment.StagingInfo.IntakeStage.Measure)+" points of functional change since intake), placing the patient in Stage "+Object(n["toDisplayString"])(e.primaryAssessment.StagingInfo.CurrentStage.Stage)+" and means the "+Object(n["toDisplayString"])(e.primaryAssessment.StagingInfo.CurrentStage.PatientFunctionText),1)):(Object(n["openBlock"])(),Object(n["createBlock"])("td",h," Patient's intake functional measure is "+Object(n["toDisplayString"])(e.primaryAssessment.StagingInfo.IntakeStage.Measure)+" out of 100 (higher number = greater function). ",1)):(Object(n["openBlock"])(),Object(n["createBlock"])("td",p," Patient's intake functional measure is "+Object(n["toDisplayString"])(e.primaryAssessment.StagingInfo.IntakeStage.Measure)+" out of 100 (higher number = greater function). This FS measure places the patient in Stage "+Object(n["toDisplayString"])(e.primaryAssessment.StagingInfo.IntakeStage.Stage)+" and means the patient "+Object(n["toDisplayString"])(e.primaryAssessment.StagingInfo.StagingLevels[e.primaryAssessment.StagingInfo.IntakeStage.Stage-1].Title.toLowerCase()),1))]),Object(n["createVNode"])("tr",m,[f,Object(n["createVNode"])("td",v,Object(n["toDisplayString"])(e.primaryAssessment.RiskAdjustedStatisticalFOTO),1),(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.primaryAssessment.FunctionalScoreSummaries.length-1,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])("td",{role:"cell",key:e})})),128)),Object(n["createVNode"])("td",O," Given the patient's risk-adjustment variables, like-patients nationally had a FS score of "+Object(n["toDisplayString"])(e.primaryAssessment.StagingInfo.RiskAdjustedStage.Measure)+", Stage "+Object(n["toDisplayString"])(e.primaryAssessment.StagingInfo.RiskAdjustedStage.Stage)+", at intake. ",1)])])])}var j=r("5c40"),y=Object(j["z"])({name:"FunctionalStatusMeasureTable",props:{primaryAssessment:Object}});y.render=g;t["a"]=y}});
//# sourceMappingURL=index.f2fdc45a.js.map